(function(){"use strict";var e={196:function(e,t,s){s.d(t,{c:function(){return He}});var i=s(144),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{style:{backgroundImage:"url(/frontend/"+e.bodybg+")"},attrs:{id:"wrapper"}},[t("div",{attrs:{id:"content"}},[t("router-view")],1)])])},l=[],n={data:function(){return{bodybg:"/"==this.$route.path||"/exit"==this.$route.path?"/front_background.png":""}},watch:{$route(e){this.bodybg="/"==e.path||"/exit"==this.$route.path?"/front_background.png":""}}},o=n,r=s(1001),c=(0,r.Z)(o,a,l,!1,null,null,null),d=c.exports,h=s(8345),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("Navigation",{attrs:{msg:"Navigation"}}),t("router-view")],1)},_=[],m=function(){var e=this,t=e._self._c;return t("nav",{staticClass:"navbar fixed-top navbar-expand-lg navbar-light",class:{dark:e.isDark}},[t("div",{staticClass:"col-2"},[(e.isDark,t("img",{attrs:{src:"/frontend/model-Icon-FTT-126px_with_text_PV.png"}}))]),t("div",{staticClass:"col-1"},[e.isDark?t("img",{attrs:{src:"/frontend/cambridge_logo_dark.png"}}):t("img",{attrs:{src:"/frontend/cambridge_logo_light.png"}})]),t("div",{staticClass:"col-2"}),e.isActive("/exit")?e._e():t("div",{staticClass:"col-7",attrs:{id:"navbar"}},[t("table",[t("tr",[t("td",{class:{active:e.isActive("/")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Home"}},[e._v("HOME")])])],1),t("td",{class:{active:e.isActive("/run")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/run"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Run the model"}},[e._v("RUN")])])],1),t("td",{class:{active:e.isActive("/results")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/results"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"View model results"}},[e._v("RESULTS")])])],1),t("td",{class:{active:e.isActive("/Extract")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/Extract"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Extract multiple variables"}},[e._v("EXTRACT")])])],1),t("td",{class:{active:e.isActive("/Gamma")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/Gamma"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Update Gamma values"}},[e._v("GAMMA")])])],1),t("td",{class:{active:e.isActive("/Metadata")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/Metadata"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Display model classifications"}},[e._v("CLASSIFICATIONS")])])],1),t("td",[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.modal-exit",modifiers:{"modal-exit":!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{href:"#",title:"Exit application"}},[e._v("EXIT")])])])])]),t("b-modal",{ref:"modal_exit",attrs:{id:"modal-exit",title:"Closing WEM","ok-title":"Quit"},on:{ok:e.exit_}},[e._v(" Are you sure you want to close the World Energy Model interface?"),t("br"),e._v(" If the modelling process is still running changes may be lost. ")])],1)},b=[],g=(s(7658),{name:"Navigation",data(){return{isDark:!1,currentPath:"/"}},methods:{isActive:function(e){return e==this.currentPath},exit_:function(){this.currentPath="/exit",this.$router.push("/exit")}},watch:{$route(e){this.isDark="/"==e.path,this.currentPath=e.path}}}),p=g,v=(0,r.Z)(p,m,b,!1,null,"767a06b4",null),f=v.exports,y={name:"home",components:{Navigation:f}},x=y,w=(0,r.Z)(x,u,_,!1,null,null,null),C=w.exports,k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("h1",[e._v("Running the model")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-7 box"},[t("div",{staticClass:"overlay",style:{display:e.isRunning?"block":"none"}},[t("span",[e._v("Model is running, selections are not available.")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-7 no-float"},[t("div",{staticClass:"row text_scenarios"},[t("h2",[e._v(e._s(e.scenarios.length>1||e.scenarios[0].length>1?"Select scenarios":"Scenario"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"county_box"},[t("treeselect",{attrs:{multiple:!0,options:e.scenarios,alwaysOpen:!1,clearable:!0,showCount:!0,appendToBody:!1,defaultExpandLevel:1,maxHeight:390,limit:5,"value-consists-of":"LEAF_PRIORITY"},model:{value:e.selected_scenarios,callback:function(t){e.selected_scenarios=t},expression:"selected_scenarios"}})],1),t("div",{staticClass:"row text_scenarios"},[t("h2",[e._v(e._s("Select models"))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"model_box"},[t("treeselect",{attrs:{multiple:!0,options:e.models,alwaysOpen:!1,clearable:!0,showCount:!0,appendToBody:!1,defaultExpandLevel:1,maxHeight:390,limit:5,"value-consists-of":"LEAF_PRIORITY"},model:{value:e.selected_models,callback:function(t){e.selected_models=t},expression:"selected_models"}})],1)])]),t("div",{staticClass:"col-5 no-float"},[e._m(0),t("div",{staticClass:"row yr_label"},[t("label",{attrs:{for:"run_s_yr"}},[e._v("FIRST YEAR")]),t("b-form-input",{attrs:{id:"run_s_yr",type:"number"},model:{value:e.run_s_yr,callback:function(t){e.run_s_yr=t},expression:"run_s_yr"}})],1),t("div",{staticClass:"row yr_label"},[t("label",{attrs:{for:"run_e_yr"}},[e._v("LAST YEAR")]),t("b-form-input",{attrs:{id:"run_e_yr",type:"number"},model:{value:e.run_e_yr,callback:function(t){e.run_e_yr=t},expression:"run_e_yr"}})],1),e._m(1),t("div",{staticClass:"row button_run"},[t("button",{staticClass:"btn btn-primary",attrs:{id:"run"},on:{click:function(t){return e.run_and_listen()}}},[e._v("RUN")])]),e._m(2)])])]),t("div",{staticClass:"col-1"}),t("div",{staticClass:"col-4 box right"},[t("div",{staticClass:"row"},[t("table",[t("tr",[e._m(3),t("td",[t("div",{staticClass:"status_text status_state"},[t("span",{staticClass:"dot",style:{backgroundColor:e.status_state}}),e._v(e._s(e.status_text)+" ")])])])])]),t("div",{staticClass:"row current_progress"},[t("div",{staticClass:"progress_text"},[t("span",[e._v(" Progress of the current run ")]),0!=e.processing_remaining?t("span",{staticClass:"right"},[e._v(" Est. time remaining "+e._s(e._f("format_time")(e.processing_remaining))+" ")]):e._e()]),t("b-progress",{staticClass:"w-100",attrs:{value:e.processing_processed,max:e.processing_length>0?e.processing_length:100,"show-progress":"",height:"2rem"}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"console"},e._l(e.console_log,(function(s){return t("p",{key:s},[t("span",{staticClass:"timestamp"},[e._v(e._s(s.timestamp))]),e._v(e._s(s.message))])})),0)])])])])},S=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row text_timeframe"},[t("h2",[e._v("Time-frame")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row text_run"},[t("h2",[e._v("Run the model")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row text_notice"},[t("p",[e._v("This could take several minutes!")])])},function(){var e=this,t=e._self._c;return t("td",[t("div",{staticClass:"status_text status_title"},[e._v("Status:")])])}],T=s(9669),E=s.n(T),R=s(2345),A=s.n(R);let j;var D={name:"Run",data:()=>({error:"",scenarios:"",selected:[],models:[],run_s_yr:2015,run_e_yr:2050,selected_scenarios:null,selected_models:null,status_text:"Standing by",status_state:"#006398",isRunning:!1,processing_length:0,processing_processed:0,processing_avgtime:0,processing_remaining:0,console_log:[]}),components:{Treeselect:A()},methods:{load_scenarios:function(){E().get("http://localhost:5000/api/available_scenarios").then((e=>{let t=e.data.scenarios;this.scenarios=t;let s=e.data.models;this.models=s,console.log(t)}),(e=>{this.error="Failed to get filenames, the manager is either not running or encountered an error. ("+e.response.statusText+")"}))},save_selection:function(){He.county_selection=this.selected_scenarios,He.model_start_year=this.run_s_yr,He.model_end_year=this.run_e_yr},load_values:function(){this.selected_scenarios=He.county_selection,this.run_s_yr=He.model_start_year,this.run_e_yr=He.model_end_year},run_and_listen:function(){this.processing_length=0,this.processing_processed=0,this.processing_avgtime=0,this.processing_remaining=0;let e=[];this.selected_scenarios.forEach((t=>{e.push({scenario:t}),console.log(e)}));let t=[];this.selected_models.forEach((e=>{t.push({model:e}),console.log(t)}));let s={data:e,model:t,endyear:this.run_e_yr};this.log("message;message:Started process...;"),this.log("message;message:Processing data...;"),E().post("http://localhost:5000/api/run/initialize/",s,{headers:{"Content-Type":"application/json"}}).then((e=>{this.log("message;message:Data processed. Running modelling.;"),this.$sse("http://localhost:5000/api/run/start/",{format:"plain"}).then((e=>{j=e,e.onError((t=>{e.close(),this.update_status("system_error")})),e.subscribe("status_change",(t=>{"running"!=t&&e.close(),this.update_status(t),this.log(t)})),e.subscribe("processing",(e=>{this.update_progress(e),"progress"!=e.split(";")[0]&&this.log(e)}))}))}),(e=>{this.$bvToast.toast("Unexpected error",{title:"Running failed!",toaster:"b-toaster-bottom-right",appendToast:!0,autoHideDelay:7e3,variant:"danger"})}))},log:function(e){console.log(e);let t=new Date;t=t.toISOString();var s=/(?:;message:)([a-zA-Z0-9 \.\-\,]*)(?:;)/g,i=[];if(i=s.exec(e),0!=i.length){let e={timestamp:t,message:i[1]};this.console_log.push(e)}},update_status:function(e){switch(e){case"running":this.isRunning=!0,this.status_text="Model is running",this.status_state="#F1C40F";break;case"finished":this.isRunning=!1,this.status_text="Run finished",this.status_state="#99FFCC";break;default:this.isRunning=!1,this.status_text="Run finished with errors","system_error"==e&&(this.status_text="System error!"),this.status_state="#F06449",this.log("message;message:System error - an unexpected error occurs during the model run. There may be more information in the command prompt.;")}},update_progress:function(e){let t=e.split(";"),s=t[0];if("items"==s)this.processing_length=parseInt(t[1]);else if("progress"==s){this.processing_processed+=1;let e=this.processing_processed,s=parseFloat(t[3]);this.processing_avgtime=0==this.processing_avgtime?s:(this.processing_avgtime*e+s)/(e+1),this.processing_remaining=(this.processing_length-e)*this.processing_avgtime}}},beforeMount(){this.load_scenarios(),this.load_values(),this.log("message;message:Standing by...;")},beforeDestroy(){this.save_selection(),j.close()},filters:{format_time:function(e){if(!e)return"";let t=Math.floor(e/60),s=parseInt(e%60);return`${t} m ${s} s`}}},F=D,N=(0,r.Z)(F,k,S,!1,null,"56c6025b",null),O=N.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"accordion",attrs:{role:"tablist"}},[t("b-card",{staticClass:"mb-1"},[t("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],attrs:{block:"",variant:"info"}},[e._v("Classifications")])],1),t("b-collapse",{attrs:{id:"accordion-1",visible:"",accordion:"my-accordion",role:"tabpanel"}},[t("b-tabs",{attrs:{card:""}},e._l(e.items,(function(s){return t("b-tab",{attrs:{title:`${s.name}`}},e._l(s.title,(function(s){return t("b-list-group-item",[e._v(" "+e._s(s)+" ")])})),1)})),1)],1)],1),t("b-card",{staticClass:"mb-1"},[t("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2",modifiers:{"accordion-2":!0}}],attrs:{block:"",variant:"info"}},[e._v("Variables")])],1),t("b-collapse",{attrs:{id:"accordion-2",accordion:"my-accordion",role:"tabpanel"}},[t("div",[t("b-table",{attrs:{striped:"",hover:"",items:e.table,id:"table"}})],1)])],1)],1)},L=[],I={name:"Metadata",data(){return{items:[],table:[]}},methods:{initialise:function(){E().get("http://localhost:5000/api/info/titles").then((e=>{this.items=e.data}),(e=>{this.error_message(e,"titles")})),E().get("http://localhost:5000/api/info/vars").then((e=>{this.table=e.data.items,console.log(this.table)}),(e=>{this.error_message(e,"vars")}))}},beforeMount(){this.initialise()}},B=I,M=(0,r.Z)(B,$,L,!1,null,"3ac0003c",null),Y=M.exports,q=function(){var e=this;e._self._c;return e._m(0)},P=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("div",{staticClass:"container"},[t("div",{attrs:{id:"title"}},[t("h1",[e._v("FTT: Stand alone")])]),t("div",{attrs:{id:"intro_text"}},[t("p",[e._v("Interface for standalone version of the suite for FTT models")])])])])}],H={name:"Front",data:()=>({})},Z=H,V=(0,r.Z)(Z,q,P,!1,null,null,null),z=V.exports,U=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("b-row",[t("div",{staticClass:"col-12 draw_area"},[t("b-row",[t("b-col",{attrs:{cols:"8"}},[t("div",{staticClass:"selected_variable"},[e._v(e._s(e.selected.variable_label.label)+" "),t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"info",style:{display:e.isSet()?"":"none"},attrs:{variant:"info",size:"sm",title:e.selected.variable_label.desc}},[e._v("i")])],1)]),t("b-col",{staticClass:"download",attrs:{cols:"3"}},[t("b-col",[t("b-form-group",[t("b-form-radio-group",{attrs:{id:"btn-radios-1",options:[{text:"Chart",value:!0},{text:"Table",value:!1}],buttons:"",name:"radios-btn-default","button-variant":"outline-primary"},model:{value:e.chart_not_table,callback:function(t){e.chart_not_table=t},expression:"chart_not_table"}})],1)],1),t("b-col",{attrs:{cols:"3"}},[t("b-button",{attrs:{size:"sm"},on:{click:e.download_data}},[e._v("Download data")])],1)],1)],1),t("div",{staticClass:"overlay",style:{display:e.isSet()?"none":"block"}},[t("span",[e._v(e._s(e.selection_warning))])]),t("div",{style:{display:e.chart_not_table?"block":"none"},attrs:{id:"line"}}),t("div",{style:{display:e.chart_not_table?"none":"block"},attrs:{id:"data-table-main"}},[t("b-table",{staticClass:"table table-hover",staticStyle:{"min-height":"400px"},attrs:{selectable:"",small:"","sticky-header":"","head-variant":"light",items:JSON.parse(e.pivot)["items"],fields:JSON.parse(e.table_fields),responsive:"sm"}})],1)],1)]),t("div",{staticClass:"row"},[t("b-card",{staticClass:"box",attrs:{id:"controlpanel"}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{staticClass:"tab-pane active",attrs:{title:"Scenario",id:"Scenario"}},[t("b-row",[t("b-table",{ref:"selectableTable",staticClass:"table table-hover",attrs:{selectable:"",small:"","sticky-header":"","head-variant":"light",items:e.scenarios,fields:e.fields,"no-border-collapse":!0,responsive:"sm"},on:{"row-selected":e.onRowSelected}})],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[t("label",{staticClass:"selection_label"},[e._v("Baseline to compare to:")])]),t("b-col",[t("treeselect",{attrs:{multiple:!1,options:e.scenarios_drop},model:{value:e.selected.baseline,callback:function(t){e.$set(e.selected,"baseline",t)},expression:"selected.baseline"}})],1)],1)],1),t("b-tab",{staticClass:"tab-pane container smallselecttext",attrs:{title:"Indicator",id:"VariableSet"}},[t("b-row",[t("b-col",{attrs:{cols:"5"}},[t("b-row",[t("label",{staticClass:"selection_label"},[e._v("Indicator")]),t("b-form-radio-group",{attrs:{id:"btn-radios-2",size:"sm",inline:"true",options:[{text:"Simple",value:0},{text:"Detail",value:1},{text:"All",value:2}],name:"radios-btn-default"},model:{value:e.indic_detail,callback:function(t){e.indic_detail=t},expression:"indic_detail"}}),t("label",{staticClass:"labels"},[e._v(" Label ")]),t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.code_label,callback:function(t){e.code_label=t},expression:"code_label"}},[e._v(" Code ")])],1),t("treeselect",{attrs:{multiple:!1,options:e.variables,alwaysOpen:!0,clearable:!1,appendToBody:!1,openDirection:"below",maxHeight:150,sortValueBy:"INDEX"},model:{value:e.selected.variable,callback:function(t){e.$set(e.selected,"variable",t)},expression:"selected.variable"}})],1),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Dim 1")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate,callback:function(t){e.$set(e.selected,"aggregate",t)},expression:"selected.aggregate"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all,callback:function(t){e.select_all=t},expression:"select_all"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:e.Levels,maxHeight:150,sortValueBy:"LEVEL",limit:e.Levels,openDirection:"below",flat:!0,limitText:e.tree_limit_text},model:{value:e.selected.dimensions,callback:function(t){e.$set(e.selected,"dimensions",t)},expression:"selected.dimensions"}})],1)],1),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Dim 2")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate2,callback:function(t){e.$set(e.selected,"aggregate2",t)},expression:"selected.aggregate2"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all2,callback:function(t){e.select_all2=t},expression:"select_all2"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions2,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:e.Levels,maxHeight:150,sortValueBy:"INDEX",limit:e.Levels,openDirection:"below",flat:!0,"search-nested":"",limitText:e.tree_limit_text},model:{value:e.selected.dimensions2,callback:function(t){e.$set(e.selected,"dimensions2",t)},expression:"selected.dimensions2"}})],1)],1),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Dim 3")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate3,callback:function(t){e.$set(e.selected,"aggregate3",t)},expression:"selected.aggregate3"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all3,callback:function(t){e.select_all3=t},expression:"select_all3"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions3,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:e.Levels,maxHeight:150,sortValueBy:"INDEX",limit:e.Levels,openDirection:"below",flat:!0,limitText:e.tree_limit_text},model:{value:e.selected.dimensions3,callback:function(t){e.$set(e.selected,"dimensions3",t)},expression:"selected.dimensions3"}})],1)],1)],1)],1),t("b-tab",{staticClass:"tab-pane container",attrs:{title:"Settings",id:"ChartSet"}},[t("b-row",[t("b-col",[t("b-form-group",{staticClass:"selection_label",attrs:{label:"Color"}},[t("b-form-radio-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Dimension to seperate by colour",buttons:"","button-variant":"outline-primary",id:"color",name:"radioColor",size:"sm"},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}},[t("b-form-radio",{attrs:{value:"dimension",disabled:e.isColourActive(1)}},[e._v("Dim1")]),t("b-form-radio",{attrs:{value:"dimension2",disabled:e.isColourActive(2)}},[e._v("Dim2")]),t("b-form-radio",{attrs:{value:"scenario",disabled:e.isColourActive(3)}},[e._v("scenario")])],1)],1),t("b-form-group",{staticClass:"selection_label",attrs:{label:"Facet - y"}},[t("b-form-radio-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Dimension to plot as seperate facet plots along y axis",buttons:"","button-variant":"outline-primary",id:"facet",options:[],name:"radioFacet",size:"sm"},model:{value:e.facet,callback:function(t){e.facet=t},expression:"facet"}},[t("b-form-radio",{attrs:{disabled:e.isFacetActive(4)}},[e._v("None")]),t("b-form-radio",{attrs:{value:"dimension",disabled:e.isFacetActive(1)}},[e._v("Dim1")]),t("b-form-radio",{attrs:{value:"dimension2",disabled:e.isFacetActive(2)}},[e._v("Dim2")]),t("b-form-radio",{attrs:{value:"scenario",disabled:e.isFacetActive(3)}},[e._v("scenario")])],1)],1),t("b-form-group",{staticClass:"selection_label",attrs:{label:"Facet - x"}},[t("b-form-radio-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Dimension to plot as seperate facet plots along x axis",buttons:"","button-variant":"outline-primary",id:"facet",options:[],name:"radioFacet",size:"sm"},model:{value:e.facet_x,callback:function(t){e.facet_x=t},expression:"facet_x"}},[t("b-form-radio",{attrs:{disabled:e.isFacetActive_x(4)}},[e._v("None")]),t("b-form-radio",{attrs:{value:"dimension",disabled:e.isFacetActive_x(1)}},[e._v("Dim1")]),t("b-form-radio",{attrs:{value:"dimension2",disabled:e.isFacetActive_x(2)}},[e._v("Dim2")]),t("b-form-radio",{attrs:{value:"scenario",disabled:e.isFacetActive_x(3)}},[e._v("scenario")])],1)],1)],1),t("b-col",[t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"Show"}},[t("b-form-radio-group",{attrs:{id:"calculation",options:e.calculation_methods,name:"radioCalc"},model:{value:e.selected.calculation,callback:function(t){e.$set(e.selected,"calculation",t)},expression:"selected.calculation"}})],1),t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"Start Year"}},[t("b-form-select",{attrs:{id:"years",options:e.years},model:{value:e.start_year,callback:function(t){e.start_year=t},expression:"start_year"}})],1),t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"End Year"}},[t("b-form-select",{attrs:{id:"years",options:e.years},model:{value:e.end_year,callback:function(t){e.end_year=t},expression:"end_year"}})],1)],1)],1)],1)],1)],1)],1)],1)},J=[],G=s(6486),X=s.n(G),W=s(7900),Q=(s(8401),s(7461)),K=s.n(Q),ee=s(3975),te=s.n(ee),se=W.api.plugins.get("tooltip")({formatters:{year:{label:"year",format:"%Y"}}}),ie={data:[{dimension:"us",y_real:20,q_real:23,year:"2013",dimension2:"a"}],dimensions:{year:{type:"measure",scale:"time"},y_real:{type:"measure"},q_real:{type:"measure"},dimension:{type:"category"},dimension2:{type:"category"},dimension3:{type:"category"}},guide:[{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}},{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}}],plugins:[se,te()()],type:"line",x:"year",y:"y_real",order:"year",color:["scenario","dimension"]},ae=new W.Chart(ie),le={name:"Results",data:()=>({pivot:"[]",pivot_columns:[],table_fields:"[]",facet:null,facet_x:null,color:null,json_:[],display_data:[],error:"",chart:{},chart_colours:[],variables:[],variables_summary:[],variables_detailed:[],variables_all:[],var_labels:[],dimensions:[],dimensions2:[],dimensions3:[],json_vars:[],var_groups:[],scenarios:[],years:[],start_year:2e3,end_year:2050,fields:[{key:"scenario",sortable:!0},{key:"description",sortable:!0},{key:"Last Run",sortable:!0}],scenarios:[],selected_table:[],titles:[],quickfilter_on:!1,settings_loaded:!0,select_all:!1,select_all2:!1,select_all3:!1,loading:!1,first_run:!0,chart_not_table:!0,indic_detail:0,code_label:!1,no_aggregate:!1,dimensions_drawn:[],dimensions2_drawn:[],dimensions3_drawn:[],scenarios_drawn:["S0"],title_old:"null",title2_old:"null",title3_old:"null",selection_warning:"Please set the scenario, variable and dimensions to display results.",selected:{variable:"",variable_label:{},dimensions:[],dimensions2:[],dimensions3:[],title:"",title2:"",title3:"",time:"Yes",scenarios:["S0"],aggregate:!1,aggregate2:!1,aggregate3:!1,baseline:"S0",calculation:"Levels",scen_index:[0]},calculation_methods:[{text:"Absolute value",value:"Levels"},{text:"Absolute difference from baseline",value:"absolute_diff"},{text:"Percentage difference from baseline",value:"perc_diff"},{text:"Year-on-Year change",value:"Annual growth rate"}],aggregation_methods:[{text:"None",value:"0"},{text:"Sum",value:"sum"}]}),components:{Treeselect:A()},methods:{initialise:function(){this.get_vars(),E().get("http://localhost:5000/api/scenarios_ran").then((e=>{let t=e.data.exist;this.scenarios=t;let s=e.data.years;this.years=s,this.scenarios_drop=t.map((e=>({label:e["scenario"],id:e["scenario"]})))}))},onRowSelected(e){this.selected_table=e,this.selected.scenarios=[],this.selected.scen_index=[];for(var t=0;t<this.selected_table.length;t++){0==this.selected.scenarios.includes(this.selected_table[t]["scenario"])&&this.selected.scenarios.push(this.selected_table[t]["scenario"]);for(var s=0;s<this.scenarios.length;s++)this.selected_table[t]["scenario"]==this.scenarios[s]["scenario"]&&this.selected.scen_index.push(s)}},selectFirstRow(){for(var e=0;e<this.selected.scen_index.length;e++)this.$refs.selectableTable.selectRow(this.selected.scen_index[e])},get_vars:function(){E().get("http://localhost:5000/api/results/variables").then((e=>{let t=e.data.vars.indicies;this.var_groups=e.data.vars.groups,this.var_labels=e.data.vars.labels,this.variables_all=t,this.variables_detailed=e.data.vars.indicies_detailed,this.variables_summary=e.data.vars.indicies_summary,this.variables=this.variables_summary,this.titles=e.data.vars.title_map,this.chart_colours=e.data.vars.chart_colours}),(e=>{this.error_message(e,"variables")}))},get_dimensions:function(){0!=this.selected.scenarios.length&&(this.selected.titles=this.titles[this.selected.variable],"TIME"==this.selected.titles["title4"]?this.selected.time="Yes":this.selected.time="No",E().get(`http://localhost:5000/api/info/${this.selected.titles["title"]}`).then((e=>{if("Sectors"in e.data)this.dimensions=e.data.Sectors;else{let t=e.data;this.dimensions=t.map((e=>({label:e,id:e})))}}),(e=>{this.error_message(e,"dimensions")})),E().get(`http://localhost:5000/api/info/${this.selected.titles["title2"]}`).then((e=>{if("Sectors"in e.data)this.dimensions2=e.data.Sectors;else{let t=e.data;this.dimensions2=t.map((e=>({label:e,id:e})))}}),(e=>{this.error_message(e,"dimensions2")})),E().get(`http://localhost:5000/api/info/${this.selected.titles["title3"]}`).then((e=>{if("Sectors"in e.data)this.dimensions3=e.data.Sectors;else{let t=e.data;this.dimensions3=t.map((e=>({label:e,id:e})))}}),(e=>{this.error_message(e,"dimensions")})),this.selected.title=this.titles[this.selected.variable]["title"],this.selected.title2=this.titles[this.selected.variable]["title2"],this.selected.title3=this.titles[this.selected.variable]["title3"])},update_chart:function(){if("Yes"==this.selected.time?(ie.x="year",ie.type="line"):(ie.x="dimension3",ie.type="line"),0==this.isSet())return;if(this.isdrawn())return;if(0==this.var_groups.length)return;if(1==this.loading)return;if(this.facet==this.color&&null!=this.facet)return;if(this.facet_x==this.color&&null!=this.color)return;if(this.facet==this.facet_x&&null!=this.facet_x)return;this.var_groups.filter((e=>-1!=e.indexOf(this.selected.variable)));let e=X().cloneDeep(this.selected);e["variable"]=[this.selected.variable],e["title"]=[this.selected.title],e["title2"]=[this.selected.title2],e["title3"]=[this.selected.title3],e["variable_label"]=[this.selected.variable_label],e["Start_Year"]=this.start_year,e["End_Year"]=this.end_year,E().get("http://localhost:5000/api/results/data/json",{params:e}).then((e=>{this.json_=e.data}),(e=>{this.error_message(e,"requested chart data")})),this.title_update(),ae.updateConfig(ie),this.title_fix(),1==this.first_run&&this.selectFirstRow(),this.first_run=!1,this.dimensions_drawn=this.selected.dimensions,this.dimensions2_drawn=this.selected.dimensions2,this.dimensions3_drawn=this.selected.dimensions3,this.scenarios_drawn=this.selected.scenarios},download_data:function(){let e=X().cloneDeep(this.selected);e["variable"]=[this.selected.variable],e["title"]=[this.selected.title],e["title2"]=[this.selected.title2],e["title3"]=[this.selected.title3],e["variable_label"]=[this.selected.variable_label],E().get("http://localhost:5000/api/results/data/csv",{params:e}).then((e=>{let t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t);var i=document.createElement("a");i.href=s,i.download=`FTT_data_download_${(new Date).toISOString()}.csv`,i.click()}),(e=>{this.error_message(e,"download data")}))},update_table:function(){let e=[{key:"scenario",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension2",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"Yes"==this.selected.time?"dimension3":"year",sortable:!1,stickyColumn:!0,isRowHeader:!0}];this.pivot.length>0&&Object.keys(this.pivot[0]).slice(0,Object.keys(this.pivot[0]).length-3).forEach((t=>{e.push({key:t})})),this.table_fields=JSON.stringify(e),this.pivot=JSON.stringify({items:this.pivot})},isSet:function(){return!!this&&""!=this.selected.variable&this.selected.dimensions.length>0&this.selected.dimensions2.length>0&this.selected.dimensions3.length>0&this.selected.scenarios.length>0},isdrawn:function(){return 0!=this.arraysEqual(this.selected.dimensions,this.dimensions_drawn)&&(0!=this.arraysEqual(this.selected.dimensions2,this.dimensions_drawn2)&&(0!=this.arraysEqual(this.selected.dimensions3,this.dimensions_drawn3)&&0!=this.arraysEqual(this.selected.scenarios,this.scenarios_drawn)))},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0},isFacetActive:function(e){var t=[];return this.selected.scenarios.length>1&&t.push("scenario"),this.selected.dimensions.length>1&&t.push("dimension"),this.selected.dimensions2.length>1&&t.push("dimension2"),4==e?t.length>=2:1==t.length||(1==e?this.selected.dimensions.length<=1:2==e?this.selected.dimensions2.length<=1:3==e?this.selected.scenarios.length<=1:4==e&&t.length>=2)},isFacetActive_x:function(e){var t=[];return this.selected.scenarios.length>1&&t.push("scenario"),this.selected.dimensions.length>1&&t.push("dimension"),this.selected.dimensions2.length>1&&t.push("dimension2"),1==e||2==e||3==e?3!=t.length:4==e&&3==t.length},isColourActive:function(e){return 1==e?this.selected.dimensions.length<=1:2==e?this.selected.dimensions2.length<=1:3==e&&this.selected.scenarios.length<=1},title_update:function(){let e="",t="";"absolute_diff"==this.selected.calculation||"perc_diff"==this.selected.calculation?e="Difference from baseline":"Annual growth rate"==this.selected.calculation&&(e="Year on Year growth"),t="Levels"==this.selected.calculation||"absolute_diff"==this.selected.calculation?this.selected.variable_label.unit:"%",e=e+" ("+t+")";var s="Scenarios: "+this.selected.scenarios;s=this.selected.dimensions.length>4?s+" / Elements: Multiple selected ("+this.selected.dimensions.length+")":s+" / Elements: "+this.selected.dimensions,null!=this.facet?ie.guide=[{y:{label:{text:e}},color:{brewer:this.chart_colours}},{y:{label:{text:this.facet}},x:{label:{text:s}},color:{brewer:this.chart_colours}}]:ie.guide={y:{label:{text:e}},x:{label:{text:s}},color:{brewer:this.chart_colours}}},tree_limit_text:function(){return""},title_fix:function(){let e="",t="";"absolute_diff"==this.selected.calculation||"perc_diff"==this.selected.calculation?e="Difference from baseline":"Annual growth rate"==this.selected.calculation&&(e="Year on Year growth"),t="Levels"==this.selected.calculation||"absolute_diff"==this.selected.calculation?this.selected.variable_label.unit:"%",e=e+" ("+t+")";var s="Scenarios: "+this.selected.scenarios;s=this.selected.dimensions.length>4?s+" / Elements: Multiple selected ("+this.selected.dimensions.length+")":s+" / Elements: "+this.selected.dimensions,document.getElementsByClassName("label-token").length>0&&(document.getElementsByClassName("label-token")[0].innerHTML=s),2==document.getElementsByClassName("label-token").length?document.getElementsByClassName("label-token")[1].innerHTML=e:null!=this.facet&&null==this.facet_x&&document.getElementsByClassName("label-token").length>2?document.getElementsByClassName("label-token")[2].innerHTML=e:null!=this.facet_x&&document.getElementsByClassName("label-token").length>3&&(document.getElementsByClassName("label-token")[3].innerHTML=e)},check_facet_color:function(){var e=[];this.selected.scenarios.length>1&&e.push("scenario"),this.selected.dimensions.length>1&&e.push("dimension"),this.selected.dimensions2.length>1&&e.push("dimension2");var t=[];null==this.color&&t.push("color"),null==this.facet&&t.push("facet"),null==this.facet_x&&t.push("facet_x"),1==e.length?(this.color=e[0],this.facet=null,this.facet_x=null):2==e.length?(this.color=e[0],this.facet=e[1],this.facet_x=null):3==e.length&t.length>0&&(this.color=e[0],this.facet=e[1],this.facet_x=e[2])},check_facet_color_swap:function(e,t){var s=[];this.selected.scenarios.length>1&&s.push("scenario"),this.selected.dimensions.length>1&&s.push("dimension"),this.selected.dimensions.length>1&&s.push("dimension2"),1!=s.length&&("facet"==e?t==this.color?this.color=s.filter((e=>e!==t&e!==this.facet_x))[0]:t==this.facet_x&&(this.facet_x=s.filter((e=>e!==t&e!==this.color))[0]):"color"==e?t==this.facet?this.facet=s.filter((e=>e!==t&e!==this.facet_x))[0]:t==this.facet_x&&(this.facet_x=s.filter((e=>e!==t&e!==this.facet))[0]):"facet_x"==e&&(t==this.color?this.color=s.filter((e=>e!==t&e!==this.facet))[0]:t==this.facet&&(this.facet=s.filter((e=>e!==t&e!==this.color))[0])))},selection_warning_update:function(){this.selection_warning="Please set the ";var e=0;e+=0==this.selected.dimensions.length?1:0,e+=0==this.selected.dimensions2.length?1:0,e+=0==this.selected.scenarios.length?1:0,0==this.selected.dimensions.length&&(this.selection_warning=this.selection_warning+"Dim 1(s)",2==e&0==this.selected.dimensions.length?this.selection_warning=this.selection_warning+" and ":3==e&&(this.selection_warning=this.selection_warning+", ")),0==this.selected.dimensions2.length&&(this.selection_warning=this.selection_warning+"Dim 2(s)"),0==this.selected.scenarios.length&&(e>1&&(this.selection_warning=this.selection_warning+" and "),this.selection_warning=this.selection_warning+"scenario(s)")},saveselection:function(){0==He.saved&&(He.results_selected=this.selected,He.saved=!0)},error_message:function(e,t){var s="";if(e.response)s="Failed to get "+t+", the manager is either not running or encountered an error.("+e.response.statusText+")";else s="Failed to get "+t+", the manager is either not running or encountered an error (Check backend is running).";alert(s)}},beforeMount(){this.initialise()},mounted(){localStorage.pivot="",localStorage.table_fields="",localStorage.Variable="",ae.renderTo(document.getElementById("line"))},beforeUpdate(){},beforeDestroy(){},watch:{variables:function(){1==this.settings_loaded&&this.selected.variable!=this.variables[0].children[0].id&&(this.selected.variable=this.variables[0].children[0].id,this.get_dimensions())},years:function(){this.start_year=this.years[0],this.end_year=this.years[this.years.length-1]},start_year:function(){this.update_chart()},end_year:function(){this.update_chart()},scenarios:function(){},dimensions:function(){1==this.dimensions.length?this.selected.dimensions=[this.dimensions[0].id]:this.selected.title==this.title_old&&this.dimensions_drawn.length>0?this.selected.dimensions=this.dimensions_drawn:1==this.settings_loaded&&(this.selected.dimensions=[this.dimensions[0].id]),""!=this.selected.title&&(this.title_old=this.selected.title)},dimensions2:function(){1==this.dimensions2.length?this.selected.dimensions2=[this.dimensions2[0].id]:this.selected.title2==this.title2_old&&this.dimensions2_drawn.length>0?this.selected.dimensions2=this.dimensions2_drawn:1==this.settings_loaded&&(this.selected.dimensions2=[this.dimensions2[0].id]),""!=this.selected.title2&&(this.title2_old=this.selected.title2)},dimensions3:function(){1==this.dimensions3.length?this.selected.dimensions3=[this.dimensions3[0].id]:this.selected.title3==this.title3_old&&this.dimensions3_drawn.length>0?this.selected.dimensions3=this.dimensions3_drawn:1==this.settings_loaded&&(this.selected.dimensions3=[this.dimensions3[0].id]),""!=this.selected.title3&&(this.title3_old=this.selected.title3)},chart_not_table:function(){this.chart_not_table&&this.update_chart()},"selected.scenarios":function(){this.selection_warning_update(),this.update_chart()},"selected.variable":function(){this.loading=!0,""!=this.selected.variable&&(this.selected.dimensions=[],this.selected.dimensions2=[],this.selected.dimensions3=[],this.get_dimensions()),this.selected.variable_label=this.var_labels[this.selected.variable],this.selected.variable_label.unit.includes("/")?this.no_aggregate=!0:this.no_aggregate=!1,this.loading=!1,this.isSet&&this.update_chart()},"selected.dimensions":function(){this.isSet&&(this.update_chart(),this.selection_warning_update())},"selected.dimensions2":function(){this.isSet&&(this.update_chart(),this.selection_warning_update())},"selected.dimensions3":function(){this.isSet&&(this.update_chart(),this.selection_warning_update())},"selected.aggregation":function(){this.update_chart()},"selected.calculation":function(){this.update_chart()},"selected.baseline":function(){this.update_chart()},"selected.aggregate":function(){this.update_chart()},"selected.aggregate2":function(){this.update_chart()},"selected.aggregate3":function(){this.update_chart()},select_all:function(){if(this.selected.dimensions=[],this.select_all)for(var e=0;e<this.dimensions.length;e++)this.selected.dimensions.push(this.dimensions[e].id);else this.selected.dimensions.push(this.dimensions[0].id)},select_all2:function(){if(this.selected.dimensions2=[],this.select_all2)for(var e=0;e<this.dimensions2.length;e++)this.selected.dimensions2.push(this.dimensions2[e].id);else this.selected.dimensions2.push(this.dimensions2[0].id)},select_all3:function(){if(this.selected.dimensions3=[],this.select_all3)for(var e=0;e<this.dimensions3.length;e++)this.selected.dimensions3.push(this.dimensions3[e].id);else this.selected.dimensions3.push(this.dimensions3[0].id)},indic_detail:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((e=>({label:e.id,id:e.label,children:e.children.map((e=>({label:e.id,id:e.id})))}))))},code_label:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((e=>({label:e.id,id:e.label,children:e.children.map((e=>({label:e.id,id:e.id})))}))))},json_:function(){this.pivot=JSON.parse(this.json_.pivot),this.display_data=JSON.parse(this.json_.results),"Yes"==this.selected.time?this.json_vars=this.json_.info.filter((e=>-1==["year","dimension","dimension2","dimension3","scenario"].indexOf(e))):this.json_vars=this.json_.info.filter((e=>-1==["dimension3","dimension","dimension2","dimension2","scenario"].indexOf(e))),this.selected.dimensions.length>0&&this.update_table()},display_data:function(){if(1!=He.saved&&1!=this.loading){ie.data=this.display_data,"Yes"==this.selected.time?ie.dimensions={year:{type:"measure",scale:"time"},dimension:{type:"category"},dimension2:{type:"category"},scenario:{type:"category"}}:ie.dimensions={dimension3:{type:"catergory"},dimension:{type:"category"},dimension2:{type:"category"},scenario:{type:"category"}};for(var e=0;e<this.json_vars.length;e++)ie.dimensions[this.json_vars[e]]={type:"measure"};this.check_facet_color(),ie.color=this.color,ie.y=this.facet?["variables",this.facet]:["variables"],ie.x=this.facet_x?["year",this.facet_x]:["year"],this.quickfilter_on?ie.plugins=[se,te()(),K()(this.json_vars)]:ie.plugins=[se,te()()],this.title_update(),ae.updateConfig(ie),this.title_fix()}},facet:function(){this.facet==this.color|this.facet==this.facet_x&&this.check_facet_color_swap("facet",this.facet),ie.y=this.facet?["variables",this.facet]:["variables"],this.quickfilter_on?ie.plugins=[se,te()(),K()(this.json_vars)]:ie.plugins=[se,te()()],this.title_update(),ae.updateConfig(ie),this.title_fix()},facet_x:function(){this.facet_x==this.facet|this.facet_x==this.color&&this.check_facet_color_swap("facet_x",this.facet_x),ie.x=this.facet_x?["year",this.facet_x]:["year"],ae.updateConfig(ie),this.title_fix()},color:function(){this.color==this.facet|this.color==this.facet_x&&this.check_facet_color_swap("color",this.color),ie.color=this.color,this.quickfilter_on?ie.plugins=[se,te()(),K()(this.json_vars)]:ie.plugins=[se,te()()],this.title_update(),ae.updateConfig(ie),this.title_fix()},quickfilter_on:function(){this.quickfilter_on?ie.plugins=[se,te()(),K()(this.json_vars)]:ie.plugins=[se,te()()],ae.updateConfig(ie),this.title_fix()}}},ne=le,oe=(0,r.Z)(ne,U,J,!1,null,"65cad404",null),re=oe.exports,ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("b-card",{staticClass:"box",attrs:{id:"controlpanel"}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{staticClass:"tab-pane active",attrs:{title:"Scenario",id:"Scenario"}},[t("b-row",[t("b-table",{ref:"selectableTable",staticClass:"table table-hover",attrs:{selectable:"",small:"","sticky-header":"","head-variant":"light",items:e.scenarios,fields:e.fields,"no-border-collapse":!0,responsive:"sm"},on:{"row-selected":e.onRowSelected}})],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[t("label",{staticClass:"selection_label"},[e._v("Baseline to compare to:")])]),t("b-col",[t("treeselect",{attrs:{multiple:!1,options:e.scenarios_drop},model:{value:e.selected.baseline,callback:function(t){e.$set(e.selected,"baseline",t)},expression:"selected.baseline"}})],1)],1)],1),t("b-tab",{staticClass:"tab-pane container smallselecttext",attrs:{title:"Indicator",id:"VariableSet"}},[t("b-row",[t("b-col",{attrs:{cols:"5"}},[t("b-row",[t("label",{staticClass:"selection_label"},[e._v("Indicators")]),t("b-form-radio-group",{attrs:{id:"btn-radios-2",size:"sm",inline:"true",options:[{text:"Simple",value:0},{text:"Detail",value:1},{text:"All",value:2}],name:"radios-btn-default"},model:{value:e.indic_detail,callback:function(t){e.indic_detail=t},expression:"indic_detail"}}),t("label",{staticClass:"labels"},[e._v(" Label ")]),t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.code_label,callback:function(t){e.code_label=t},expression:"code_label"}},[e._v(" Code ")])],1),e._l(e.variables,(function(s,i){return t("b-row",{key:i,staticClass:"form-row"},[t("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[t("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:s.id,expression:"value.id"}],attrs:{block:"",variant:"info"}},[e._v(e._s(s.id)+" ")])],1),t("b-collapse",{attrs:{id:s.id,visible:"",accordion:"my-accordion",role:"tabpanel"}},[t("b-form-checkbox-group",{staticClass:"checkboxgroup",attrs:{options:s.children,"value-field":"id","text-field":"label",stacked:""},model:{value:e.selected.variable,callback:function(t){e.$set(e.selected,"variable",t)},expression:"selected.variable"}})],1)],1)],1)}))],2),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Regions")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate,callback:function(t){e.$set(e.selected,"aggregate",t)},expression:"selected.aggregate"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all,callback:function(t){e.select_all=t},expression:"select_all"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:"2",maxHeight:325,sortValueBy:"LEVEL",limit:e.Levels,openDirection:"below",flat:!0,limitText:e.tree_limit_text},model:{value:e.selected.dimensions,callback:function(t){e.$set(e.selected,"dimensions",t)},expression:"selected.dimensions"}})],1)],1)],1)],1),t("b-tab",{staticClass:"tab-pane container",attrs:{title:"Settings",id:"ChartSet"}},[t("b-row",[t("b-col",[t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"Show"}},[t("b-form-radio-group",{attrs:{id:"calculation",options:e.calculation_methods,name:"radioCalc"},model:{value:e.selected.calculation,callback:function(t){e.$set(e.selected,"calculation",t)},expression:"selected.calculation"}})],1)],1)],1)],1)],1)],1)],1),t("br"),t("b-button",{attrs:{size:"lg"},on:{click:e.download_data}},[e._v("Download data")])],1)},de=[],he=W.api.plugins.get("tooltip")({formatters:{year:{label:"year",format:"%Y"}}}),ue={data:[{dimension:"us",y_real:20,q_real:23,year:"2013",dimension2:"a"}],dimensions:{year:{type:"measure",scale:"time"},y_real:{type:"measure"},q_real:{type:"measure"},dimension:{type:"category"},dimension2:{type:"category"},dimension3:{type:"category"}},guide:[{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}},{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}}],plugins:[he,te()()],type:"line",x:"year",y:"y_real",order:"year",color:["scenario","dimension"]},_e=new W.Chart(ue),me={name:"Results",data:()=>({pivot:"[]",pivot_columns:[],table_fields:"[]",facet:null,facet_x:null,color:null,json_:[],display_data:[],error:"",chart:{},chart_colours:[],variables:[],variables_summary:[],variables_detailed:[],variables_all:[],var_labels:[],dimensions:[],json_vars:[],var_groups:[],scenarios:[],scenarios_drop:[],fields:[{key:"scenario",sortable:!0},{key:"description",sortable:!0},{key:"Last Run",sortable:!0}],scenarios:[],sort_by:"scenario",selectMode:"multi",selected_table:[],titles:[],titles2:[],titles3:[],quickfilter_on:!1,settings_loaded:!0,select_all:!1,select_all2:!1,select_all3:!1,loading:!1,first_run:!0,chart_not_table:!0,indic_detail:0,code_label:!1,no_aggregate:!1,dimensions_drawn:[],scenarios_drawn:["baseline"],title_old:"null",selection_warning:"Please set the scenario, variable and dimensions to display results.",selected:{variable:[],variable_label:{},dimensions:[],dimensions2:["All"],dimensions3:["All"],title:[],title2:[],title3:[],time:"Yes",scenarios:["Baseline"],aggregate:!1,baseline:"Baseline",calculation:"Levels",scen_index:[0]},calculation_methods:[{text:"Absolute value",value:"Levels"},{text:"Absolute difference from baseline",value:"absolute_diff"},{text:"Percentage difference from baseline",value:"perc_diff"},{text:"Year-on-Year change",value:"Annual growth rate"}],aggregation_methods:[{text:"None",value:"0"},{text:"Sum",value:"sum"}],minmax_year:[2006,2016]}),components:{Treeselect:A()},methods:{initialise(){this.get_vars(),E().get("http://localhost:5000/api/scenarios_ran").then((e=>{let t=e.data.exist;this.scenarios=t,this.scenarios_drop=t.map((e=>({label:e["scenario"],id:e["scenario"]})))}))},onRowSelected(e){this.selected_table=e,this.selected.scenarios=[],this.selected.scen_index=[];for(var t=0;t<this.selected_table.length;t++){0==this.selected.scenarios.includes(this.selected_table[t]["scenario"])&&this.selected.scenarios.push(this.selected_table[t]["scenario"]);for(var s=0;s<this.scenarios.length;s++)this.selected_table[t]["scenario"]==this.scenarios[s]["scenario"]&&this.selected.scen_index.push(s)}},selectFirstRow(){for(var e=0;e<this.selected.scen_index.length;e++)this.$refs.selectableTable.selectRow(this.selected.scen_index[e])},get_vars(){E().get("http://localhost:5000/api/results/variables").then((e=>{let t=e.data.vars.indicies;this.var_groups=e.data.vars.groups,this.var_labels=e.data.vars.labels,this.variables_all=t,this.variables_detailed=e.data.vars.indicies_detailed,this.variables_summary=e.data.vars.indicies_summary,this.variables=this.variables_summary,this.titles=e.data.vars.title_map,this.chart_colours=e.data.vars.chart_colours}),(e=>{this.error_message(e,"variables")}))},get_dimensions(){0!=this.selected.scenarios.length&&(this.selected.titles=this.titles[this.selected.variable],"TIME"==this.selected.titles["title4"]?this.selected.time="Yes":this.selected.time="No",E().get(`http://localhost:5000/api/info/${this.selected.titles["title"]}`).then((e=>{if("Sectors"in e.data)this.dimensions=e.data.Sectors;else{let t=e.data;this.dimensions=t.map((e=>({label:e,id:e})))}}),(e=>{this.error_message(e,"dimensions")})),this.selected.title[0]=this.titles[this.selected.variable[0]]["title"])},download_data:function(){this.selected.title=[],this.selected.title2=[],this.selected.title3=[],this.selected.variable_label=[];for(var e=new Array(0),t=0;t<this.selected.variable.length;++t)e.push(this.selected.variable[t]),this.selected.title.push(this.titles[this.selected.variable[t]]["title"]),this.selected.title2.push(this.titles[this.selected.variable[t]]["title2"]),this.selected.title3.push(this.titles[this.selected.variable[t]]["title3"]),this.selected.variable_label.push(this.var_labels[this.selected.variable[t]]);this.selected.variable=e,console.log("Variable:"),console.log(this.selected.title),console.log(this.selected.variable),console.log(this.selected.dimensions);let s=X().cloneDeep(this.selected);E().get("http://localhost:5000/api/results/data/csv",{params:s}).then((e=>{let t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t);var i=document.createElement("a");i.href=s,i.download=`FTT_standalone_download_${(new Date).toISOString()}.csv`,i.click()}),(e=>{this.error_message(e,"download data")}))},isSet:function(){return!!this&&""!=this.selected.variable&this.selected.dimensions.length>0&this.selected.dimensions2.length>0&this.selected.dimensions3.length>0&this.selected.scenarios.length>0},isdrawn:function(){return 0!=this.arraysEqual(this.selected.dimensions,this.dimensions_drawn)&&(0!=this.arraysEqual(this.selected.dimensions2,this.dimensions_drawn2)&&(0!=this.arraysEqual(this.selected.dimensions3,this.dimensions_drawn3)&&0!=this.arraysEqual(this.selected.scenarios,this.scenarios_drawn)))},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0},tree_limit_text:function(){return""},error_message:function(e,t){var s="";if(e.response)s="Failed to get "+t+", the manager is either not running or encountered an error.("+e.response.statusText+")";else s="Failed to get "+t+", the manager is either not running or encountered an error (Check backend is running).";alert(s)}},beforeMount(){this.initialise()},mounted(){localStorage.pivot="",localStorage.table_fields="",localStorage.Variable="",_e.renderTo(document.getElementById("line"))},beforeUpdate(){},beforeDestroy(){},watch:{variables:function(){1==this.settings_loaded&&this.selected.variable!=this.variables[0].children[0].id&&(this.selected.variable=[this.variables[0].children[0].id],this.get_dimensions())},scenarios:function(){},dimensions:function(){1==this.dimensions.length?this.selected.dimensions=[this.dimensions[0].id]:this.selected.title==this.title_old&&this.dimensions_drawn.length>0?this.selected.dimensions=this.dimensions_drawn:1==this.settings_loaded&&(this.selected.dimensions=[this.dimensions[0].id]),""!=this.selected.title&&(this.title_old=this.selected.title)},"selected.variable":function(){},select_all:function(){if(this.selected.dimensions=[],this.select_all)for(var e=0;e<this.dimensions.length;e++)this.selected.dimensions.push(this.dimensions[e].id);else this.selected.dimensions.push(this.dimensions[0].id)},indic_detail:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((e=>({label:e.id,id:e.label,children:e.children.map((e=>({label:e.id,id:e.id})))}))))},code_label:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((e=>({label:e.id,id:e.label,children:e.children.map((e=>({label:e.id,id:e.id})))}))))}}},be=me,ge=(0,r.Z)(be,ce,de,!1,null,"11ad111e",null),pe=ge.exports,ve=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"container",style:{display:e.initial?"block":"none"}},[t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Model to calibrate:")]),t("treeselect",{attrs:{multiple:!1,options:e.ftt_models},model:{value:e.selected.model,callback:function(t){e.$set(e.selected,"model",t)},expression:"selected.model"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("End year")]),t("b-form-input",{attrs:{type:"number"},model:{value:e.end_year,callback:function(t){e.end_year=t},expression:"end_year"}})],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.initialise_model}},[e._v("Initialise model")])],1)],1),t("div",{staticClass:"container",style:{display:e.loading?"block":"none"}},[t("h2",[e._v("Initialising model... ")]),t("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Spinning",variant:"info"}})],1),t("div",{staticClass:"container",style:{display:e.loaded?"block":"none"}},[t("h3",[e._v('"'+e._s(e.selected.model)+'"')]),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Region to calibrate:")]),t("treeselect",{attrs:{multiple:!1,options:e.regions},model:{value:e.selected.region,callback:function(t){e.$set(e.selected,"region",t)},expression:"selected.region"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Slider limit")]),t("b-form-input",{attrs:{type:"number"},model:{value:e.slider_limit,callback:function(t){e.slider_limit=t},expression:"slider_limit"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Start_year")]),t("b-form-select",{attrs:{options:e.years,type:"number"},model:{value:e.start_year,callback:function(t){e.start_year=t},expression:"start_year"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Slider step size")]),t("b-form-input",{attrs:{type:"number"},model:{value:e.slider_step,callback:function(t){e.slider_step=t},expression:"slider_step"}})],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.call_run_ftt}},[e._v("Run FTT")])],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.save_gamma_values}},[e._v(" Save Gamma values ")])],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.select_other_FTT}},[e._v(" Select other FTT ")])],1)],1),t("b-row",[t("div",{staticClass:"col-4 draw_area"},[t("div",{staticClass:"col-md-12 form-group"},e._l(e.form,(function(s,i){return t("div",{key:i,staticClass:"form-row"},[t("label",{staticClass:"col-md-5 col-form-label dim_label",attrs:{for:i}},[e._v(" "+e._s(i)+" ")]),t("b-form-input",{staticClass:"col-md-5 spec_select",attrs:{type:"range",id:i,step:e.slider_step,min:e.slider_limit_min,max:e.slider_limit,number:!0},model:{value:e.form[i],callback:function(t){e.$set(e.form,i,t)},expression:"form[key]"}}),t("label",{staticClass:"col-md-2 col-form-label dim_label",attrs:{for:i}},[e._v(" "+e._s(s.toFixed(6))+" ")])],1)})),0)]),t("div",{staticClass:"col-8 draw_area"},[t("b-row",[t("b-col",{attrs:{cols:"8"}},[t("div",{staticClass:"selected_variable"},[e._v(" "+e._s(e.selected.variable_label.label)+" "),t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"info",style:{display:e.isSet()?"":"none"},attrs:{variant:"info",size:"sm",title:e.selected.variable_label.desc}},[e._v("i")])],1)]),t("b-col",{staticClass:"download",attrs:{cols:"3"}},[t("b-button",{attrs:{size:"sm"},on:{click:e.download_data}},[e._v("Download data")])],1)],1),t("div",{staticClass:"overlay",style:{display:e.isSet()?"none":"block"}},[t("span",[e._v(e._s(e.selection_warning))])]),t("div",{style:{display:e.chart_not_table?"block":"none"},attrs:{id:"line"}}),t("div",{style:{display:e.chart_not_table?"none":"block"},attrs:{id:"data-table-main"}}),t("b-row",[t("table",[t("tr",[t("td",[t("div",{staticClass:"status_text status_title"},[e._v("Status:")])]),t("td",[t("div",{staticClass:"status_text status_state"},[t("span",{staticClass:"dot",style:{backgroundColor:e.status_state}}),e._v(e._s(e.status_text)+" ")])])])])]),t("b-row",{staticClass:"current_progress"},[t("div",{staticClass:"progress_text"},[t("span",[e._v(" Progress of the current run ")]),0!=e.processing_remaining?t("span",{staticClass:"right"},[e._v(" Est. time remaining "+e._s(e._f("format_time")(e.processing_remaining))+" ")]):e._e()]),t("b-progress",{staticClass:"w-100",attrs:{value:e.processing_processed,max:e.processing_length>0?e.processing_length:100,"show-progress":"",height:"2rem"}})],1)],1)])],1)])},fe=[];let ye;var xe=W.api.plugins.get("tooltip")({}),we={data:[{dimension:"us",y_real:20,q_real:23,year:"2013",dimension2:"a"}],dimensions:{year:{type:"measure",scale:"time"},y_real:{type:"measure"},q_real:{type:"measure"},dimension:{type:"category"},dimension2:{type:"category"},dimension3:{type:"category"}},guide:[{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}},{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}}],plugins:[xe,te()()],type:"line",x:"year",y:"y_real",order:"year",color:["scenario","dimension"]},Ce=new W.Chart(we),ke={name:"Results",data:()=>({slider_limit:100,slider_limit_min:-100,slider_step:1,start_year:2e3,years:[],end_year:2025,loaded:!1,loading:!1,initial:!0,form:{},ftt_models:[],regions:[],regions_list:[],console_log:[],pivot:"[]",pivot_columns:[],table_fields:"[]",facet:null,facet_x:null,color:null,json_:[],display_data:[],error:"",chart:{},chart_colours:[],variables:[],variables_summary:[],variables_detailed:[],var_labels:[],dimensions:[],dimensions2:[],dimensions3:[],json_vars:[],var_groups:[],scenarios:[],fields:[{key:"scenario",sortable:!0},{key:"description",sortable:!0},{key:"Last Run",sortable:!0}],scenarios_county:[],sort_by:"scenario",selectMode:"multi",selected_table:[],titles:[],quickfilter_on:!1,settings_loaded:!0,select_all:!1,select_all2:!1,select_all3:!1,loading:!1,first_run:!0,chart_not_table:!0,indic_detail:!1,no_aggregate:!1,selection_warning:"Please set the scenario, variable and dimensions to display results.",selected:{variable:"",variable_label:{},dimensions:[],dimensions2:[],dimensions3:[],title:[],title2:[],title3:[],time:"Yes",scenarios:["Baseline"],aggregate:!1,aggregate2:!1,aggregate3:!1,baseline:"Baseline",calculation:"0",scen_index:[0],region:"",model:"power_gen",type:"Chart"},error:"",status_text:"Standing by",status_state:"#006398",isRunning:!1,processing_length:0,processing_processed:0,processing_avgtime:0,processing_remaining:0,console_log:[],calculation_methods:[{text:"Absolute value",value:"0"},{text:"Absolute difference from baseline",value:"absolute_diff"},{text:"Percentage difference from baseline",value:"perc_diff"},{text:"Year-on-Year change",value:"yoy"}],aggregation_methods:[{text:"None",value:"0"},{text:"Sum",value:"sum"}],minmax_year:[2006,2016]}),components:{Treeselect:A()},methods:{initialise:function(){E().get("http://localhost:5000/api/info/ftt_options").then((e=>{let t=e.data;this.ftt_models=t.map((e=>({label:e,id:e})))}))},isSet:function(){return!!this&&""!=this.selected.latest},update_chart:function(){Ce.updateConfig(we),1==this.first_run&&this.selectFirstRow(),this.first_run=!1},update_data:function(){E().get(`http://localhost:5000/api/gamma/chart/${this.selected.model}/${this.selected.region}/${this.start_year}/json`).then((e=>{this.json_=e.data}),(e=>{this.error_message(e,"requested chart data")}))},set_table_fields:function(){let e=[{key:"scenario",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension2",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"Yes"==this.selected.time?"dimension3":"year",sortable:!1,stickyColumn:!0,isRowHeader:!0}];this.update_data(),this.pivot=JSON.parse(this.json_.pivot),this.pivot[0].length>0&&Object.keys(this.pivot[0]).slice(0,Object.keys(this.pivot[0]).length-3).forEach((t=>{e.push({key:t})})),this.table_fields=e},download_data:function(){E().get(`http://localhost:5000/api/gamma/chart/${this.selected.model}/${this.selected.region}/${this.year_from_hist}/csv`).then((e=>{let t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t);var i=document.createElement("a");i.href=s,i.download=`FTT_data_download_${(new Date).toISOString()}.csv`,i.click()}),(e=>{this.error_message(e,"download data")}))},error_message:function(e,t){var s="";if(e.response)s="Failed to get "+t+", the manager is either not running or encountered an error.("+e.response.statusText+")";else s="Failed to get "+t+", the manager is either not running or encountered an error (Check backend is running).";alert(s)},load_current_gamma:function(){E().get(`http://localhost:5000/api/Gamma/values/${this.selected.model}/${this.selected.region}`).then((e=>{this.form={},this.form=e.data.gamma}),(e=>{this.error="Failed to get specifications, the manager is either not running or encountered an error. ("+e.response.statusText+")"}))},call_run_ftt:function(){this.run_ftt()},initialise_model:function(){this.initial=!1,this.loading=!0,E().get(`http://localhost:5000/api/run_gamma/initialize/${this.end_year}`).then((e=>{let t=e.data.years;this.years=t,this.selected.region=this.regions_list[0],this.loading=!1,this.loaded=!0})),E().get("http://localhost:5000/api/info/region_titles").then((e=>{let t=e.data;this.regions_list=t,this.regions=t.map((e=>({label:e,id:e})))}),(e=>{this.error_message(e,"region titles")}))},run_ftt:function(){this.processing_length=0,this.processing_processed=0,this.processing_avgtime=0,this.processing_remaining=0;let e={data:this.form,model:this.selected.model,region:this.selected.region,region_pos:this.regions_list.indexOf(this.selected.region)};this.log("message;message:Started process...;"),this.log("message;message:Processing data...;"),E().post("http://localhost:5000/api/run_gamma/update_gamma/",e,{headers:{"Content-Type":"application/json"}}).then((e=>{this.log("message;message:Data processed. Running modelling.;"),this.$sse("http://localhost:5000/api/run_gamma/start/",{format:"plain"}).then((e=>{ye=e,e.onError((t=>{e.close(),this.update_status("system_error")})),e.subscribe("status_change",(t=>{"running"!=t&&(this.update_data(),e.close()),this.update_status(t),this.log(t)})),e.subscribe("processing",(e=>{this.update_progress(e),"progress"!=e.split(";")[0]&&this.log(e)}))}))}),(e=>{this.$bvToast.toast("Unexpected error",{title:"Running failed!",toaster:"b-toaster-bottom-right",appendToast:!0,autoHideDelay:7e3,variant:"danger"})}))},log:function(e){let t=new Date;t=t.toISOString();var s=/(?:;message:)([a-zA-Z0-9 \.\-\,]*)(?:;)/g,i=[];if(i=s.exec(e),0!=i.length){let e={timestamp:t,message:i[1]};this.console_log.push(e)}},update_status:function(e){switch(e){case"running":this.isRunning=!0,this.status_text="Model is running",this.status_state="#F1C40F";break;case"finished":this.isRunning=!1,this.status_text="Run finished",this.status_state="#99FFCC";break;default:this.isRunning=!1,this.status_text="Run finished with errors","system_error"==e&&(this.status_text="System error!"),this.status_state="#F06449",this.log("message;message:System error - an unexpected error occurs during the model run. There may be more information in the command prompt.;")}},update_progress:function(e){let t=e.split(";"),s=t[0];if("items"==s)this.processing_length=parseInt(t[1]);else if("progress"==s){this.processing_processed+=1;let e=this.processing_processed,s=parseFloat(t[3]);this.processing_avgtime=0==this.processing_avgtime?s:(this.processing_avgtime*e+s)/(e+1),this.processing_remaining=(this.processing_length-e)*this.processing_avgtime}},save_gamma_values:function(){let e={data:this.form,model:this.selected.model,region:this.selected.region,region_pos:this.regions_list.indexOf(this.selected.region)};E().post("http://localhost:5000/api/run_gamma/save_gamma/",e,{headers:{"Content-Type":"application/json"}})},select_other_FTT:function(){this.initial=!0,this.loaded=!1}},beforeMount(){this.initialise(),this.log("message;message:Standing by...;")},beforeDestroy(){ye.close()},mounted(){localStorage.pivot="",localStorage.table_fields="",localStorage.Variable="",Ce.renderTo(document.getElementById("line"))},watch:{category:function(){this.charts=this.graphics[this.category].charts,this.tables=this.graphics[this.category].tables},"selected.region":function(){this.load_current_gamma(),this.update_data()},"selected.model":function(){},json_:function(){this.pivot=JSON.parse(this.json_.pivot),this.display_data=JSON.parse(this.json_.results),this.json_vars=this.json_.info.filter((e=>-1==["year","dimension","dimension2","dimension3","scenario"].indexOf(e)))},slider_limit:function(){this.slider_limit_min=-1*this.slider_limit},display_data:function(){if("table"!=this.selected.type){we.data=this.display_data,we.dimensions={year:{type:"category"},dimension:{type:"category"},dimension2:{type:"category"},scenario:{type:"category"}},we.x=this.json_.x,we.y=this.json_.y,we.color=this.json_.color,we.type=this.json_.type,"None"!=this.json_.label?we.label=this.json_.label:we.label="",we.guide[0].y.label.text=this.json_.unit;for(var e=0;e<this.json_vars.length;e++)we.dimensions[this.json_vars[e]]={type:"measure"};this.quickfilter_on?we.plugins=[xe,te()(),K()(this.json_vars)]:we.plugins=[xe,te()()],Ce.updateConfig(we)}}},filters:{format_time:function(e){if(!e)return"";let t=Math.floor(e/60),s=parseInt(e%60);return`${t} m ${s} s`}}},Se=ke,Te=(0,r.Z)(Se,ve,fe,!1,null,"66104ca3",null),Ee=Te.exports,Re=function(){var e=this;e._self._c;return e._m(0)},Ae=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("div",{staticClass:"container"},[t("div",{attrs:{id:"title"}},[t("h1",[e._v("Application terminated")])]),t("div",{attrs:{id:"intro_text"}},[t("p",[e._v("You may close this window now.")])])])])}],je={name:"Exit",data:()=>({}),mounted(){setTimeout(E().get("http://localhost:5000/api/exit").then((e=>{console.log("Application closed.")}),(e=>{this.error_message(e,"regions")})),1e3)}},De=je,Fe=(0,r.Z)(De,Re,Ae,!1,null,null,null),Ne=Fe.exports;i["default"].use(h.ZP);var Oe=new h.ZP({routes:[{path:"/",name:"home",component:C,children:[{path:"run",component:O},{path:"metadata",component:Y},{path:"",component:z},{path:"results",component:re},{path:"Extract",component:pe},{path:"Gamma",component:Ee},{path:"exit",component:Ne}]},{path:"/about",name:"about",component:()=>s.e(443).then(s.bind(s,8725)),children:[{path:"run",component:O}]}]}),$e=s(2970),Le=s(266),Ie=s(2513),Be=s.n(Ie),Me=(s(7024),s(7027)),Ye=s(8947),qe=s(1436),Pe=s(7810);Ye.vI.add(qe.kZ_,qe.I7k,qe.Xcf,qe.Vmj),i["default"].component("font-awesome-icon",Pe.GN),i["default"].config.productionTip=!1,i["default"].use($e.ZPm),i["default"].use(Me.Z),i["default"].use(Be()),i["default"].directive("ripple",Le.Z);const He=new i["default"]({data:{region_selection:[],pivot:[],table_fields:{},model_start_year:2015,model_end_year:2050,results_selected:{},saved:!1,scen_region:null,scen_saved:!1,spec_saved:!1,specs_variable:null}});new i["default"]({router:Oe,render:e=>e(d)}).$mount("#app")}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var l=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,l){if(!i){var n=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],l=e[d][2];for(var o=!0,r=0;r<i.length;r++)(!1&l||n>=l)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(o=!1,l<n&&(n=l));if(o){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[i,a,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/about.8b39fb46.js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend_pilot_:";s.l=function(i,a,l,n){if(e[i])e[i].push(a);else{var o,r;if(void 0!==l)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+l){o=h;break}}o||(r=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+l),o.src=i),e[i]=[a];var u=function(t,s){o.onerror=o.onload=null,clearTimeout(_);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(s)})),t)return t(s)},_=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),r&&document.head.appendChild(o)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/frontend/"}(),function(){var e={143:0};s.f.j=function(t,i){var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var l=new Promise((function(s,i){a=e[t]=[s,i]}));i.push(a[2]=l);var n=s.p+s.u(t),o=new Error,r=function(i){if(s.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var l=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",o.name="ChunkLoadError",o.type=l,o.request=n,a[1](o)}};s.l(n,r,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,l,n=i[0],o=i[1],r=i[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(r)var d=r(s)}for(t&&t(i);c<n.length;c++)l=n[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},i=self["webpackChunkfrontend_pilot_"]=self["webpackChunkfrontend_pilot_"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(196)}));i=s.O(i)})();
//# sourceMappingURL=app.a1c9afb0.js.map