(function(){"use strict";var e={1941:function(e,t,s){s.d(t,{c:function(){return He}});s(6992),s(8674),s(9601),s(7727);var i,a,n=s(144),l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{style:{backgroundImage:"url(/frontend/"+e.bodybg+")"},attrs:{id:"wrapper"}},[t("div",{attrs:{id:"content"}},[t("router-view")],1)])])},o=[],r={data:function(){return{bodybg:"/"==this.$route.path||"/exit"==this.$route.path?"/front_background.png":""}},watch:{$route:function(e){this.bodybg="/"==e.path||"/exit"==this.$route.path?"/front_background.png":""}}},c=r,d=s(1001),h=(0,d.Z)(c,l,o,!1,null,null,null),u=h.exports,_=(s(1539),s(8783),s(3948),s(8345)),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("Navigation",{attrs:{msg:"Navigation"}}),t("router-view")],1)},b=[],g=function(){var e=this,t=e._self._c;return t("nav",{staticClass:"navbar fixed-top navbar-expand-lg navbar-light",class:{dark:e.isDark}},[t("div",{staticClass:"col-2"},[(e.isDark,t("img",{attrs:{src:"/frontend/model-Icon-FTT-126px_with_text_PV.png"}}))]),t("div",{staticClass:"col-1"},[e.isDark?t("img",{attrs:{src:"/frontend/cambridge_logo_dark.png"}}):t("img",{attrs:{src:"/frontend/cambridge_logo_light.png"}})]),t("div",{staticClass:"col-2"}),e.isActive("/exit")?e._e():t("div",{staticClass:"col-7",attrs:{id:"navbar"}},[t("table",[t("tr",[t("td",{class:{active:e.isActive("/")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Home"}},[e._v("HOME")])])],1),t("td",{class:{active:e.isActive("/run")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/run"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Run the model"}},[e._v("RUN")])])],1),t("td",{class:{active:e.isActive("/results")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/results"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"View model results"}},[e._v("RESULTS")])])],1),t("td",{class:{active:e.isActive("/Extract")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/Extract"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Extract multiple variables"}},[e._v("EXTRACT")])])],1),t("td",{class:{active:e.isActive("/Gamma")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/Gamma"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Update Gamma values"}},[e._v("GAMMA")])])],1),t("td",{class:{active:e.isActive("/Metadata")}},[t("router-link",{staticClass:"nav-item",attrs:{to:"/Metadata"}},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{title:"Display model classifications"}},[e._v("CLASSIFICATIONS")])])],1),t("td",[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.modal-exit",modifiers:{"modal-exit":!0}}],staticClass:"nav-link",class:{"text-light":e.isDark},attrs:{href:"#",title:"Exit application"}},[e._v("EXIT")])])])])]),t("b-modal",{ref:"modal_exit",attrs:{id:"modal-exit",title:"Closing WEM","ok-title":"Quit"},on:{ok:e.exit_}},[e._v(" Are you sure you want to close the World Energy Model interface?"),t("br"),e._v(" If the modelling process is still running changes may be lost. ")])],1)},f=[],v=(s(7658),{name:"Navigation",data:function(){return{isDark:!1,currentPath:"/"}},methods:{isActive:function(e){return e==this.currentPath},exit_:function(){this.currentPath="/exit",this.$router.push("/exit")}},watch:{$route:function(e){this.isDark="/"==e.path,this.currentPath=e.path}}}),p=v,y=(0,d.Z)(p,g,f,!1,null,"767a06b4",null),x=y.exports,w={name:"home",components:{Navigation:x}},C=w,k=(0,d.Z)(C,m,b,!1,null,null,null),S=k.exports,Z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("h1",[e._v("Running the model")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-7 box"},[t("div",{staticClass:"overlay",style:{display:e.isRunning?"block":"none"}},[t("span",[e._v("Model is running, selections are not available.")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-7 no-float"},[t("div",{staticClass:"row text_scenarios"},[t("h2",[e._v(e._s(e.scenarios.length>1||e.scenarios[0].length>1?"Select scenarios":"Scenario"))])]),t("div",{staticClass:"row"},[t("div",{staticClass:"county_box"},[t("treeselect",{attrs:{multiple:!0,options:e.scenarios,alwaysOpen:!1,clearable:!0,showCount:!0,appendToBody:!1,defaultExpandLevel:1,maxHeight:390,limit:5,"value-consists-of":"LEAF_PRIORITY"},model:{value:e.selected_scenarios,callback:function(t){e.selected_scenarios=t},expression:"selected_scenarios"}})],1),t("div",{staticClass:"row text_scenarios"},[t("h2",[e._v(e._s("Select models"))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"model_box"},[t("treeselect",{attrs:{multiple:!0,options:e.models,alwaysOpen:!1,clearable:!0,showCount:!0,appendToBody:!1,defaultExpandLevel:1,maxHeight:390,limit:5,"value-consists-of":"LEAF_PRIORITY"},model:{value:e.selected_models,callback:function(t){e.selected_models=t},expression:"selected_models"}})],1)])]),t("div",{staticClass:"col-5 no-float"},[e._m(0),t("div",{staticClass:"row yr_label"},[t("label",{attrs:{for:"run_s_yr"}},[e._v("FIRST YEAR")]),t("b-form-input",{attrs:{id:"run_s_yr",type:"number"},model:{value:e.run_s_yr,callback:function(t){e.run_s_yr=t},expression:"run_s_yr"}})],1),t("div",{staticClass:"row yr_label"},[t("label",{attrs:{for:"run_e_yr"}},[e._v("LAST YEAR")]),t("b-form-input",{attrs:{id:"run_e_yr",type:"number"},model:{value:e.run_e_yr,callback:function(t){e.run_e_yr=t},expression:"run_e_yr"}})],1),e._m(1),t("div",{staticClass:"row button_run"},[t("button",{staticClass:"btn btn-primary",attrs:{id:"run"},on:{click:function(t){return e.run_and_listen()}}},[e._v("RUN")])]),e._m(2)])])]),t("div",{staticClass:"col-1"}),t("div",{staticClass:"col-4 box right"},[t("div",{staticClass:"row"},[t("table",[t("tr",[e._m(3),t("td",[t("div",{staticClass:"status_text status_state"},[t("span",{staticClass:"dot",style:{backgroundColor:e.status_state}}),e._v(e._s(e.status_text)+" ")])])])])]),t("div",{staticClass:"row current_progress"},[t("div",{staticClass:"progress_text"},[t("span",[e._v(" Progress of the current run ")]),0!=e.processing_remaining?t("span",{staticClass:"right"},[e._v(" Est. time remaining "+e._s(e._f("format_time")(e.processing_remaining))+" ")]):e._e()]),t("b-progress",{staticClass:"w-100",attrs:{value:e.processing_processed,max:e.processing_length>0?e.processing_length:100,"show-progress":"",height:"2rem"}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"console"},e._l(e.console_log,(function(s){return t("p",{key:s},[t("span",{staticClass:"timestamp"},[e._v(e._s(s.timestamp))]),e._v(e._s(s.message))])})),0)])])])])},T=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row text_timeframe"},[t("h2",[e._v("Time-frame")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row text_run"},[t("h2",[e._v("Run the model")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row text_notice"},[t("p",[e._v("This could take several minutes!")])])},function(){var e=this,t=e._self._c;return t("td",[t("div",{staticClass:"status_text status_title"},[e._v("Status:")])])}],E=(s(4747),s(4916),s(2222),s(9669)),R=s.n(E),A=s(2345),j=s.n(A),D={name:"Run",data:function(){return{error:"",scenarios:"",selected:[],models:[],run_s_yr:2015,run_e_yr:2050,selected_scenarios:null,selected_models:null,status_text:"Standing by",status_state:"#006398",isRunning:!1,processing_length:0,processing_processed:0,processing_avgtime:0,processing_remaining:0,console_log:[]}},components:{Treeselect:j()},methods:{load_scenarios:function(){var e=this;R().get("http://localhost:5000/api/available_scenarios").then((function(t){var s=t.data.scenarios;e.scenarios=s;var i=t.data.models;e.models=i,console.log(s)}),(function(t){e.error="Failed to get filenames, the manager is either not running or encountered an error. ("+t.response.statusText+")"}))},save_selection:function(){He.county_selection=this.selected_scenarios,He.model_start_year=this.run_s_yr,He.model_end_year=this.run_e_yr},load_values:function(){this.selected_scenarios=He.county_selection,this.run_s_yr=He.model_start_year,this.run_e_yr=He.model_end_year},run_and_listen:function(){var e=this;this.processing_length=0,this.processing_processed=0,this.processing_avgtime=0,this.processing_remaining=0;var t=[];this.selected_scenarios.forEach((function(e){t.push({scenario:e}),console.log(t)}));var s=[];this.selected_models.forEach((function(e){s.push({model:e}),console.log(s)}));var a={data:t,model:s,endyear:this.run_e_yr};this.log("message;message:Started process...;"),this.log("message;message:Processing data...;"),R().post("http://localhost:5000/api/run/initialize/",a,{headers:{"Content-Type":"application/json"}}).then((function(t){e.log("message;message:Data processed. Running modelling.;"),e.$sse("http://localhost:5000/api/run/start/",{format:"plain"}).then((function(t){i=t,t.onError((function(s){t.close(),e.update_status("system_error")})),t.subscribe("status_change",(function(s){"running"!=s&&t.close(),e.update_status(s),e.log(s)})),t.subscribe("processing",(function(t){e.update_progress(t),"progress"!=t.split(";")[0]&&e.log(t)}))}))}),(function(t){e.$bvToast.toast("Unexpected error",{title:"Running failed!",toaster:"b-toaster-bottom-right",appendToast:!0,autoHideDelay:7e3,variant:"danger"})}))},log:function(e){console.log(e);var t=new Date;t=t.toISOString();var s=/(?:;message:)([a-zA-Z0-9 \.\-\,]*)(?:;)/g,i=[];if(i=s.exec(e),0!=i.length){var a={timestamp:t,message:i[1]};this.console_log.push(a)}},update_status:function(e){switch(e){case"running":this.isRunning=!0,this.status_text="Model is running",this.status_state="#F1C40F";break;case"finished":this.isRunning=!1,this.status_text="Run finished",this.status_state="#99FFCC";break;default:this.isRunning=!1,this.status_text="Run finished with errors","system_error"==e&&(this.status_text="System error!"),this.status_state="#F06449",this.log("message;message:System error - an unexpected error occurs during the model run. There may be more information in the command prompt.;")}},update_progress:function(e){var t=e.split(";"),s=t[0];if("items"==s)this.processing_length=parseInt(t[1]);else if("progress"==s){this.processing_processed+=1;var i=this.processing_processed,a=parseFloat(t[3]);this.processing_avgtime=0==this.processing_avgtime?a:(this.processing_avgtime*i+a)/(i+1),this.processing_remaining=(this.processing_length-i)*this.processing_avgtime}}},beforeMount:function(){this.load_scenarios(),this.load_values(),this.log("message;message:Standing by...;")},beforeDestroy:function(){this.save_selection(),i.close()},filters:{format_time:function(e){if(!e)return"";var t=Math.floor(e/60),s=parseInt(e%60);return"".concat(t," m ").concat(s," s")}}},F=D,N=(0,d.Z)(F,Z,T,!1,null,"56c6025b",null),O=N.exports,L=(s(8309),function(){var e=this,t=e._self._c;return t("div",{staticClass:"accordion",attrs:{role:"tablist"}},[t("b-card",{staticClass:"mb-1"},[t("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],attrs:{block:"",variant:"info"}},[e._v("Classifications")])],1),t("b-collapse",{attrs:{id:"accordion-1",visible:"",accordion:"my-accordion",role:"tabpanel"}},[t("b-tabs",{attrs:{card:""}},e._l(e.items,(function(s){return t("b-tab",{attrs:{title:"".concat(s.name)}},e._l(s.title,(function(s){return t("b-list-group-item",[e._v(" "+e._s(s)+" ")])})),1)})),1)],1)],1),t("b-card",{staticClass:"mb-1"},[t("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2",modifiers:{"accordion-2":!0}}],attrs:{block:"",variant:"info"}},[e._v("Variables")])],1),t("b-collapse",{attrs:{id:"accordion-2",accordion:"my-accordion",role:"tabpanel"}},[t("div",[t("b-table",{attrs:{striped:"",hover:"",items:e.table,id:"table"}})],1)])],1)],1)}),I=[],B={name:"Metadata",data:function(){return{items:[],table:[]}},methods:{initialise:function(){var e=this;R().get("http://localhost:5000/api/info/titles").then((function(t){e.items=t.data}),(function(t){e.error_message(t,"titles")})),R().get("http://localhost:5000/api/info/vars").then((function(t){e.table=t.data.items,console.log(e.table)}),(function(t){e.error_message(t,"vars")}))}},beforeMount:function(){this.initialise()}},M=B,Y=(0,d.Z)(M,L,I,!1,null,"3ac0003c",null),$=Y.exports,q=function(){var e=this;e._self._c;return e._m(0)},P=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("div",{staticClass:"container"},[t("div",{attrs:{id:"title"}},[t("h1",[e._v("FTT: Stand alone")])]),t("div",{attrs:{id:"intro_text"}},[t("p",[e._v("Interface for standalone version of the suite for FTT models")])])])])}],H={name:"Front",data:function(){return{}}},V=H,z=(0,d.Z)(V,q,P,!1,null,null,null),U=z.exports,J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("b-row",[t("div",{staticClass:"col-12 draw_area"},[t("b-row",[t("b-col",{attrs:{cols:"8"}},[t("div",{staticClass:"selected_variable"},[e._v(e._s(e.selected.variable_label.label)+" "),t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"info",style:{display:e.isSet()?"":"none"},attrs:{variant:"info",size:"sm",title:e.selected.variable_label.desc}},[e._v("i")])],1)]),t("b-col",{staticClass:"download",attrs:{cols:"3"}},[t("b-col",[t("b-form-group",[t("b-form-radio-group",{attrs:{id:"btn-radios-1",options:[{text:"Chart",value:!0},{text:"Table",value:!1}],buttons:"",name:"radios-btn-default","button-variant":"outline-primary"},model:{value:e.chart_not_table,callback:function(t){e.chart_not_table=t},expression:"chart_not_table"}})],1)],1),t("b-col",{attrs:{cols:"3"}},[t("b-button",{attrs:{size:"sm"},on:{click:e.download_data}},[e._v("Download data")])],1)],1)],1),t("div",{staticClass:"overlay",style:{display:e.isSet()?"none":"block"}},[t("span",[e._v(e._s(e.selection_warning))])]),t("div",{style:{display:e.chart_not_table?"block":"none"},attrs:{id:"line"}}),t("div",{style:{display:e.chart_not_table?"none":"block"},attrs:{id:"data-table-main"}},[t("b-table",{staticClass:"table table-hover",staticStyle:{"min-height":"400px"},attrs:{selectable:"",small:"","sticky-header":"","head-variant":"light",items:JSON.parse(e.pivot)["items"],fields:JSON.parse(e.table_fields),responsive:"sm"}})],1)],1)]),t("div",{staticClass:"row"},[t("b-card",{staticClass:"box",attrs:{id:"controlpanel"}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{staticClass:"tab-pane active",attrs:{title:"Scenario",id:"Scenario"}},[t("b-row",[t("b-table",{ref:"selectableTable",staticClass:"table table-hover",attrs:{selectable:"",small:"","sticky-header":"","head-variant":"light",items:e.scenarios,fields:e.fields,"no-border-collapse":!0,responsive:"sm"},on:{"row-selected":e.onRowSelected}})],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[t("label",{staticClass:"selection_label"},[e._v("Baseline to compare to:")])]),t("b-col",[t("treeselect",{attrs:{multiple:!1,options:e.scenarios_drop},model:{value:e.selected.baseline,callback:function(t){e.$set(e.selected,"baseline",t)},expression:"selected.baseline"}})],1)],1)],1),t("b-tab",{staticClass:"tab-pane container smallselecttext",attrs:{title:"Indicator",id:"VariableSet"}},[t("b-row",[t("b-col",{attrs:{cols:"5"}},[t("b-row",[t("label",{staticClass:"selection_label"},[e._v("Indicator")]),t("b-form-radio-group",{attrs:{id:"btn-radios-2",size:"sm",inline:"true",options:[{text:"Simple",value:0},{text:"Detail",value:1},{text:"All",value:2}],name:"radios-btn-default"},model:{value:e.indic_detail,callback:function(t){e.indic_detail=t},expression:"indic_detail"}}),t("label",{staticClass:"labels"},[e._v(" Label ")]),t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.code_label,callback:function(t){e.code_label=t},expression:"code_label"}},[e._v(" Code ")])],1),t("treeselect",{attrs:{multiple:!1,options:e.variables,alwaysOpen:!0,clearable:!1,appendToBody:!1,openDirection:"below",maxHeight:150,sortValueBy:"INDEX"},model:{value:e.selected.variable,callback:function(t){e.$set(e.selected,"variable",t)},expression:"selected.variable"}})],1),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Dim 1")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate,callback:function(t){e.$set(e.selected,"aggregate",t)},expression:"selected.aggregate"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all,callback:function(t){e.select_all=t},expression:"select_all"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:e.Levels,maxHeight:150,sortValueBy:"LEVEL",limit:e.Levels,openDirection:"below",flat:!0,limitText:e.tree_limit_text},model:{value:e.selected.dimensions,callback:function(t){e.$set(e.selected,"dimensions",t)},expression:"selected.dimensions"}})],1)],1),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Dim 2")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate2,callback:function(t){e.$set(e.selected,"aggregate2",t)},expression:"selected.aggregate2"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all2,callback:function(t){e.select_all2=t},expression:"select_all2"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions2,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:e.Levels,maxHeight:150,sortValueBy:"INDEX",limit:e.Levels,openDirection:"below",flat:!0,"search-nested":"",limitText:e.tree_limit_text},model:{value:e.selected.dimensions2,callback:function(t){e.$set(e.selected,"dimensions2",t)},expression:"selected.dimensions2"}})],1)],1),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Dim 3")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate3,callback:function(t){e.$set(e.selected,"aggregate3",t)},expression:"selected.aggregate3"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all3,callback:function(t){e.select_all3=t},expression:"select_all3"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions3,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:e.Levels,maxHeight:150,sortValueBy:"INDEX",limit:e.Levels,openDirection:"below",flat:!0,limitText:e.tree_limit_text},model:{value:e.selected.dimensions3,callback:function(t){e.$set(e.selected,"dimensions3",t)},expression:"selected.dimensions3"}})],1)],1)],1)],1),t("b-tab",{staticClass:"tab-pane container",attrs:{title:"Settings",id:"ChartSet"}},[t("b-row",[t("b-col",[t("b-form-group",{staticClass:"selection_label",attrs:{label:"Color"}},[t("b-form-radio-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Dimension to seperate by colour",buttons:"","button-variant":"outline-primary",id:"color",name:"radioColor",size:"sm"},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}},[t("b-form-radio",{attrs:{value:"dimension",disabled:e.isColourActive(1)}},[e._v("Dim1")]),t("b-form-radio",{attrs:{value:"dimension2",disabled:e.isColourActive(2)}},[e._v("Dim2")]),t("b-form-radio",{attrs:{value:"scenario",disabled:e.isColourActive(3)}},[e._v("scenario")])],1)],1),t("b-form-group",{staticClass:"selection_label",attrs:{label:"Facet - y"}},[t("b-form-radio-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Dimension to plot as seperate facet plots along y axis",buttons:"","button-variant":"outline-primary",id:"facet",options:[],name:"radioFacet",size:"sm"},model:{value:e.facet,callback:function(t){e.facet=t},expression:"facet"}},[t("b-form-radio",{attrs:{disabled:e.isFacetActive(4)}},[e._v("None")]),t("b-form-radio",{attrs:{value:"dimension",disabled:e.isFacetActive(1)}},[e._v("Dim1")]),t("b-form-radio",{attrs:{value:"dimension2",disabled:e.isFacetActive(2)}},[e._v("Dim2")]),t("b-form-radio",{attrs:{value:"scenario",disabled:e.isFacetActive(3)}},[e._v("scenario")])],1)],1),t("b-form-group",{staticClass:"selection_label",attrs:{label:"Facet - x"}},[t("b-form-radio-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Dimension to plot as seperate facet plots along x axis",buttons:"","button-variant":"outline-primary",id:"facet",options:[],name:"radioFacet",size:"sm"},model:{value:e.facet_x,callback:function(t){e.facet_x=t},expression:"facet_x"}},[t("b-form-radio",{attrs:{disabled:e.isFacetActive_x(4)}},[e._v("None")]),t("b-form-radio",{attrs:{value:"dimension",disabled:e.isFacetActive_x(1)}},[e._v("Dim1")]),t("b-form-radio",{attrs:{value:"dimension2",disabled:e.isFacetActive_x(2)}},[e._v("Dim2")]),t("b-form-radio",{attrs:{value:"scenario",disabled:e.isFacetActive_x(3)}},[e._v("scenario")])],1)],1)],1),t("b-col",[t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"Show"}},[t("b-form-radio-group",{attrs:{id:"calculation",options:e.calculation_methods,name:"radioCalc"},model:{value:e.selected.calculation,callback:function(t){e.$set(e.selected,"calculation",t)},expression:"selected.calculation"}})],1),t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"Start Year"}},[t("b-form-select",{attrs:{id:"years",options:e.years},model:{value:e.start_year,callback:function(t){e.start_year=t},expression:"start_year"}})],1),t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"End Year"}},[t("b-form-select",{attrs:{id:"years",options:e.years},model:{value:e.end_year,callback:function(t){e.end_year=t},expression:"end_year"}})],1)],1)],1)],1)],1)],1)],1)],1)},G=[],X=s(5222),W=(s(1249),s(6699),s(2023),s(7327),s(285),s(1637),s(7042),s(7941),s(8862),s(6486)),Q=s.n(W),K=s(7900),ee=(s(8401),s(7461)),te=s.n(ee),se=s(3975),ie=s.n(se),ae=K.api.plugins.get("tooltip")({formatters:{year:{label:"year",format:"%Y"}}}),ne={data:[{dimension:"us",y_real:20,q_real:23,year:"2013",dimension2:"a"}],dimensions:{year:{type:"measure",scale:"time"},y_real:{type:"measure"},q_real:{type:"measure"},dimension:{type:"category"},dimension2:{type:"category"},dimension3:{type:"category"}},guide:[{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}},{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}}],plugins:[ae,ie()()],type:"line",x:"year",y:"y_real",order:"year",color:["scenario","dimension"]},le=new K.Chart(ne),oe={name:"Results",data:function(){var e;return e={pivot:"[]",pivot_columns:[],table_fields:"[]",facet:null,facet_x:null,color:null,json_:[],display_data:[],error:"",chart:{},chart_colours:[],variables:[],variables_summary:[],variables_detailed:[],variables_all:[],var_labels:[],dimensions:[],dimensions2:[],dimensions3:[],json_vars:[],var_groups:[],scenarios:[],years:[],start_year:2e3,end_year:2050,fields:[{key:"scenario",sortable:!0},{key:"description",sortable:!0},{key:"Last Run",sortable:!0}]},(0,X.Z)(e,"scenarios",[]),(0,X.Z)(e,"selected_table",[]),(0,X.Z)(e,"titles",[]),(0,X.Z)(e,"quickfilter_on",!1),(0,X.Z)(e,"settings_loaded",!0),(0,X.Z)(e,"select_all",!1),(0,X.Z)(e,"select_all2",!1),(0,X.Z)(e,"select_all3",!1),(0,X.Z)(e,"loading",!1),(0,X.Z)(e,"first_run",!0),(0,X.Z)(e,"chart_not_table",!0),(0,X.Z)(e,"indic_detail",0),(0,X.Z)(e,"code_label",!1),(0,X.Z)(e,"no_aggregate",!1),(0,X.Z)(e,"dimensions_drawn",[]),(0,X.Z)(e,"dimensions2_drawn",[]),(0,X.Z)(e,"dimensions3_drawn",[]),(0,X.Z)(e,"scenarios_drawn",["S0"]),(0,X.Z)(e,"title_old","null"),(0,X.Z)(e,"title2_old","null"),(0,X.Z)(e,"title3_old","null"),(0,X.Z)(e,"selection_warning","Please set the scenario, variable and dimensions to display results."),(0,X.Z)(e,"selected",{variable:"",variable_label:{},dimensions:[],dimensions2:[],dimensions3:[],title:"",title2:"",title3:"",time:"Yes",scenarios:["S0"],aggregate:!1,aggregate2:!1,aggregate3:!1,baseline:"S0",calculation:"Levels",scen_index:[0]}),(0,X.Z)(e,"calculation_methods",[{text:"Absolute value",value:"Levels"},{text:"Absolute difference from baseline",value:"absolute_diff"},{text:"Percentage difference from baseline",value:"perc_diff"},{text:"Year-on-Year change",value:"Annual growth rate"}]),(0,X.Z)(e,"aggregation_methods",[{text:"None",value:"0"},{text:"Sum",value:"sum"}]),e},components:{Treeselect:j()},methods:{initialise:function(){var e=this;this.get_vars(),R().get("http://localhost:5000/api/scenarios_ran").then((function(t){var s=t.data.exist;e.scenarios=s;var i=t.data.years;e.years=i,e.scenarios_drop=s.map((function(e){return{label:e["scenario"],id:e["scenario"]}}))}))},onRowSelected:function(e){this.selected_table=e,this.selected.scenarios=[],this.selected.scen_index=[];for(var t=0;t<this.selected_table.length;t++){0==this.selected.scenarios.includes(this.selected_table[t]["scenario"])&&this.selected.scenarios.push(this.selected_table[t]["scenario"]);for(var s=0;s<this.scenarios.length;s++)this.selected_table[t]["scenario"]==this.scenarios[s]["scenario"]&&this.selected.scen_index.push(s)}},selectFirstRow:function(){for(var e=0;e<this.selected.scen_index.length;e++)this.$refs.selectableTable.selectRow(this.selected.scen_index[e])},get_vars:function(){var e=this;R().get("http://localhost:5000/api/results/variables").then((function(t){var s=t.data.vars.indicies;e.var_groups=t.data.vars.groups,e.var_labels=t.data.vars.labels,e.variables_all=s,e.variables_detailed=t.data.vars.indicies_detailed,e.variables_summary=t.data.vars.indicies_summary,e.variables=e.variables_summary,e.titles=t.data.vars.title_map,e.chart_colours=t.data.vars.chart_colours}),(function(t){e.error_message(t,"variables")}))},get_dimensions:function(){var e=this;0!=this.selected.scenarios.length&&(this.selected.titles=this.titles[this.selected.variable],"TIME"==this.selected.titles["title4"]?this.selected.time="Yes":this.selected.time="No",R().get("http://localhost:5000/api/info/".concat(this.selected.titles["title"])).then((function(t){if("Sectors"in t.data)e.dimensions=t.data.Sectors;else{var s=t.data;e.dimensions=s.map((function(e){return{label:e,id:e}}))}}),(function(t){e.error_message(t,"dimensions")})),R().get("http://localhost:5000/api/info/".concat(this.selected.titles["title2"])).then((function(t){if("Sectors"in t.data)e.dimensions2=t.data.Sectors;else{var s=t.data;e.dimensions2=s.map((function(e){return{label:e,id:e}}))}}),(function(t){e.error_message(t,"dimensions2")})),R().get("http://localhost:5000/api/info/".concat(this.selected.titles["title3"])).then((function(t){if("Sectors"in t.data)e.dimensions3=t.data.Sectors;else{var s=t.data;e.dimensions3=s.map((function(e){return{label:e,id:e}}))}}),(function(t){e.error_message(t,"dimensions")})),this.selected.title=this.titles[this.selected.variable]["title"],this.selected.title2=this.titles[this.selected.variable]["title2"],this.selected.title3=this.titles[this.selected.variable]["title3"])},update_chart:function(){var e=this;if("Yes"==this.selected.time?(ne.x="year",ne.type="line"):(ne.x="dimension3",ne.type="line"),0!=this.isSet()&&!this.isdrawn()&&0!=this.var_groups.length&&1!=this.loading&&(this.facet!=this.color||null==this.facet)&&(this.facet_x!=this.color||null==this.color)&&(this.facet!=this.facet_x||null==this.facet_x)){this.var_groups.filter((function(t){return-1!=t.indexOf(e.selected.variable)}));var t=Q().cloneDeep(this.selected);t["variable"]=[this.selected.variable],t["title"]=[this.selected.title],t["title2"]=[this.selected.title2],t["title3"]=[this.selected.title3],t["variable_label"]=[this.selected.variable_label],t["Start_Year"]=this.start_year,t["End_Year"]=this.end_year,R().get("http://localhost:5000/api/results/data/json",{params:t}).then((function(t){e.json_=t.data}),(function(t){e.error_message(t,"requested chart data")})),this.title_update(),le.updateConfig(ne),this.title_fix(),1==this.first_run&&this.selectFirstRow(),this.first_run=!1,this.dimensions_drawn=this.selected.dimensions,this.dimensions2_drawn=this.selected.dimensions2,this.dimensions3_drawn=this.selected.dimensions3,this.scenarios_drawn=this.selected.scenarios}},download_data:function(){var e=this,t=Q().cloneDeep(this.selected);t["variable"]=[this.selected.variable],t["title"]=[this.selected.title],t["title2"]=[this.selected.title2],t["title3"]=[this.selected.title3],t["variable_label"]=[this.selected.variable_label],R().get("http://localhost:5000/api/results/data/csv",{params:t}).then((function(e){var t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download="FTT_data_download_".concat((new Date).toISOString(),".csv"),i.click()}),(function(t){e.error_message(t,"download data")}))},update_table:function(){var e=[{key:"scenario",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension2",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"Yes"==this.selected.time?"dimension3":"year",sortable:!1,stickyColumn:!0,isRowHeader:!0}];this.pivot.length>0&&Object.keys(this.pivot[0]).slice(0,Object.keys(this.pivot[0]).length-3).forEach((function(t){e.push({key:t})})),this.table_fields=JSON.stringify(e),this.pivot=JSON.stringify({items:this.pivot})},isSet:function(){return!!this&&""!=this.selected.variable&this.selected.dimensions.length>0&this.selected.dimensions2.length>0&this.selected.dimensions3.length>0&this.selected.scenarios.length>0},isdrawn:function(){return 0!=this.arraysEqual(this.selected.dimensions,this.dimensions_drawn)&&(0!=this.arraysEqual(this.selected.dimensions2,this.dimensions_drawn2)&&(0!=this.arraysEqual(this.selected.dimensions3,this.dimensions_drawn3)&&0!=this.arraysEqual(this.selected.scenarios,this.scenarios_drawn)))},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0},isFacetActive:function(e){var t=[];return this.selected.scenarios.length>1&&t.push("scenario"),this.selected.dimensions.length>1&&t.push("dimension"),this.selected.dimensions2.length>1&&t.push("dimension2"),4==e?t.length>=2:1==t.length||(1==e?this.selected.dimensions.length<=1:2==e?this.selected.dimensions2.length<=1:3==e?this.selected.scenarios.length<=1:4==e&&t.length>=2)},isFacetActive_x:function(e){var t=[];return this.selected.scenarios.length>1&&t.push("scenario"),this.selected.dimensions.length>1&&t.push("dimension"),this.selected.dimensions2.length>1&&t.push("dimension2"),1==e||2==e||3==e?3!=t.length:4==e&&3==t.length},isColourActive:function(e){return 1==e?this.selected.dimensions.length<=1:2==e?this.selected.dimensions2.length<=1:3==e&&this.selected.scenarios.length<=1},title_update:function(){var e="",t="";"absolute_diff"==this.selected.calculation||"perc_diff"==this.selected.calculation?e="Difference from baseline":"Annual growth rate"==this.selected.calculation&&(e="Year on Year growth"),t="Levels"==this.selected.calculation||"absolute_diff"==this.selected.calculation?this.selected.variable_label.unit:"%",e=e+" ("+t+")";var s="Scenarios: "+this.selected.scenarios;s=this.selected.dimensions.length>4?s+" / Elements: Multiple selected ("+this.selected.dimensions.length+")":s+" / Elements: "+this.selected.dimensions,null!=this.facet?ne.guide=[{y:{label:{text:e}},color:{brewer:this.chart_colours}},{y:{label:{text:this.facet}},x:{label:{text:s}},color:{brewer:this.chart_colours}}]:ne.guide={y:{label:{text:e}},x:{label:{text:s}},color:{brewer:this.chart_colours}}},tree_limit_text:function(){return""},title_fix:function(){var e="",t="";"absolute_diff"==this.selected.calculation||"perc_diff"==this.selected.calculation?e="Difference from baseline":"Annual growth rate"==this.selected.calculation&&(e="Year on Year growth"),t="Levels"==this.selected.calculation||"absolute_diff"==this.selected.calculation?this.selected.variable_label.unit:"%",e=e+" ("+t+")";var s="Scenarios: "+this.selected.scenarios;s=this.selected.dimensions.length>4?s+" / Elements: Multiple selected ("+this.selected.dimensions.length+")":s+" / Elements: "+this.selected.dimensions,document.getElementsByClassName("label-token").length>0&&(document.getElementsByClassName("label-token")[0].innerHTML=s),2==document.getElementsByClassName("label-token").length?document.getElementsByClassName("label-token")[1].innerHTML=e:null!=this.facet&&null==this.facet_x&&document.getElementsByClassName("label-token").length>2?document.getElementsByClassName("label-token")[2].innerHTML=e:null!=this.facet_x&&document.getElementsByClassName("label-token").length>3&&(document.getElementsByClassName("label-token")[3].innerHTML=e)},check_facet_color:function(){var e=[];this.selected.scenarios.length>1&&e.push("scenario"),this.selected.dimensions.length>1&&e.push("dimension"),this.selected.dimensions2.length>1&&e.push("dimension2");var t=[];null==this.color&&t.push("color"),null==this.facet&&t.push("facet"),null==this.facet_x&&t.push("facet_x"),1==e.length?(this.color=e[0],this.facet=null,this.facet_x=null):2==e.length?(this.color=e[0],this.facet=e[1],this.facet_x=null):3==e.length&t.length>0&&(this.color=e[0],this.facet=e[1],this.facet_x=e[2])},check_facet_color_swap:function(e,t){var s=this,i=[];this.selected.scenarios.length>1&&i.push("scenario"),this.selected.dimensions.length>1&&i.push("dimension"),this.selected.dimensions.length>1&&i.push("dimension2"),1!=i.length&&("facet"==e?t==this.color?this.color=i.filter((function(e){return e!==t&e!==s.facet_x}))[0]:t==this.facet_x&&(this.facet_x=i.filter((function(e){return e!==t&e!==s.color}))[0]):"color"==e?t==this.facet?this.facet=i.filter((function(e){return e!==t&e!==s.facet_x}))[0]:t==this.facet_x&&(this.facet_x=i.filter((function(e){return e!==t&e!==s.facet}))[0]):"facet_x"==e&&(t==this.color?this.color=i.filter((function(e){return e!==t&e!==s.facet}))[0]:t==this.facet&&(this.facet=i.filter((function(e){return e!==t&e!==s.color}))[0])))},selection_warning_update:function(){this.selection_warning="Please set the ";var e=0;e+=0==this.selected.dimensions.length?1:0,e+=0==this.selected.dimensions2.length?1:0,e+=0==this.selected.scenarios.length?1:0,0==this.selected.dimensions.length&&(this.selection_warning=this.selection_warning+"Dim 1(s)",2==e&0==this.selected.dimensions.length?this.selection_warning=this.selection_warning+" and ":3==e&&(this.selection_warning=this.selection_warning+", ")),0==this.selected.dimensions2.length&&(this.selection_warning=this.selection_warning+"Dim 2(s)"),0==this.selected.scenarios.length&&(e>1&&(this.selection_warning=this.selection_warning+" and "),this.selection_warning=this.selection_warning+"scenario(s)")},saveselection:function(){0==He.saved&&(He.results_selected=this.selected,He.saved=!0)},error_message:function(e,t){var s="";if(e.response)s="Failed to get "+t+", the manager is either not running or encountered an error.("+e.response.statusText+")";else s="Failed to get "+t+", the manager is either not running or encountered an error (Check backend is running).";alert(s)}},beforeMount:function(){this.initialise()},mounted:function(){localStorage.pivot="",localStorage.table_fields="",localStorage.Variable="",le.renderTo(document.getElementById("line"))},beforeUpdate:function(){},beforeDestroy:function(){},watch:{variables:function(){1==this.settings_loaded&&this.selected.variable!=this.variables[0].children[0].id&&(this.selected.variable=this.variables[0].children[0].id,this.get_dimensions())},years:function(){this.start_year=this.years[0],this.end_year=this.years[this.years.length-1]},start_year:function(){this.update_chart()},end_year:function(){this.update_chart()},scenarios:function(){},dimensions:function(){1==this.dimensions.length?this.selected.dimensions=[this.dimensions[0].id]:this.selected.title==this.title_old&&this.dimensions_drawn.length>0?this.selected.dimensions=this.dimensions_drawn:1==this.settings_loaded&&(this.selected.dimensions=[this.dimensions[0].id]),""!=this.selected.title&&(this.title_old=this.selected.title)},dimensions2:function(){1==this.dimensions2.length?this.selected.dimensions2=[this.dimensions2[0].id]:this.selected.title2==this.title2_old&&this.dimensions2_drawn.length>0?this.selected.dimensions2=this.dimensions2_drawn:1==this.settings_loaded&&(this.selected.dimensions2=[this.dimensions2[0].id]),""!=this.selected.title2&&(this.title2_old=this.selected.title2)},dimensions3:function(){1==this.dimensions3.length?this.selected.dimensions3=[this.dimensions3[0].id]:this.selected.title3==this.title3_old&&this.dimensions3_drawn.length>0?this.selected.dimensions3=this.dimensions3_drawn:1==this.settings_loaded&&(this.selected.dimensions3=[this.dimensions3[0].id]),""!=this.selected.title3&&(this.title3_old=this.selected.title3)},chart_not_table:function(){this.chart_not_table&&this.update_chart()},"selected.scenarios":function(){this.selection_warning_update(),this.update_chart()},"selected.variable":function(){this.loading=!0,""!=this.selected.variable&&(this.selected.dimensions=[],this.selected.dimensions2=[],this.selected.dimensions3=[],this.get_dimensions()),this.selected.variable_label=this.var_labels[this.selected.variable],this.selected.variable_label.unit.includes("/")?this.no_aggregate=!0:this.no_aggregate=!1,this.loading=!1,this.isSet&&this.update_chart()},"selected.dimensions":function(){this.isSet&&(this.update_chart(),this.selection_warning_update())},"selected.dimensions2":function(){this.isSet&&(this.update_chart(),this.selection_warning_update())},"selected.dimensions3":function(){this.isSet&&(this.update_chart(),this.selection_warning_update())},"selected.aggregation":function(){this.update_chart()},"selected.calculation":function(){this.update_chart()},"selected.baseline":function(){this.update_chart()},"selected.aggregate":function(){this.update_chart()},"selected.aggregate2":function(){this.update_chart()},"selected.aggregate3":function(){this.update_chart()},select_all:function(){if(this.selected.dimensions=[],this.select_all)for(var e=0;e<this.dimensions.length;e++)this.selected.dimensions.push(this.dimensions[e].id);else this.selected.dimensions.push(this.dimensions[0].id)},select_all2:function(){if(this.selected.dimensions2=[],this.select_all2)for(var e=0;e<this.dimensions2.length;e++)this.selected.dimensions2.push(this.dimensions2[e].id);else this.selected.dimensions2.push(this.dimensions2[0].id)},select_all3:function(){if(this.selected.dimensions3=[],this.select_all3)for(var e=0;e<this.dimensions3.length;e++)this.selected.dimensions3.push(this.dimensions3[e].id);else this.selected.dimensions3.push(this.dimensions3[0].id)},indic_detail:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((function(e){return{label:e.id,id:e.label,children:e.children.map((function(e){return{label:e.id,id:e.id}}))}})))},code_label:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((function(e){return{label:e.id,id:e.label,children:e.children.map((function(e){return{label:e.id,id:e.id}}))}})))},json_:function(){this.pivot=JSON.parse(this.json_.pivot),this.display_data=JSON.parse(this.json_.results),"Yes"==this.selected.time?this.json_vars=this.json_.info.filter((function(e){return-1==["year","dimension","dimension2","dimension3","scenario"].indexOf(e)})):this.json_vars=this.json_.info.filter((function(e){return-1==["dimension3","dimension","dimension2","dimension2","scenario"].indexOf(e)})),this.selected.dimensions.length>0&&this.update_table()},display_data:function(){if(1!=He.saved&&1!=this.loading){ne.data=this.display_data,"Yes"==this.selected.time?ne.dimensions={year:{type:"measure",scale:"time"},dimension:{type:"category"},dimension2:{type:"category"},scenario:{type:"category"}}:ne.dimensions={dimension3:{type:"catergory"},dimension:{type:"category"},dimension2:{type:"category"},scenario:{type:"category"}};for(var e=0;e<this.json_vars.length;e++)ne.dimensions[this.json_vars[e]]={type:"measure"};this.check_facet_color(),ne.color=this.color,ne.y=this.facet?["variables",this.facet]:["variables"],ne.x=this.facet_x?["year",this.facet_x]:["year"],this.quickfilter_on?ne.plugins=[ae,ie()(),te()(this.json_vars)]:ne.plugins=[ae,ie()()],this.title_update(),le.updateConfig(ne),this.title_fix()}},facet:function(){this.facet==this.color|this.facet==this.facet_x&&this.check_facet_color_swap("facet",this.facet),ne.y=this.facet?["variables",this.facet]:["variables"],this.quickfilter_on?ne.plugins=[ae,ie()(),te()(this.json_vars)]:ne.plugins=[ae,ie()()],this.title_update(),le.updateConfig(ne),this.title_fix()},facet_x:function(){this.facet_x==this.facet|this.facet_x==this.color&&this.check_facet_color_swap("facet_x",this.facet_x),ne.x=this.facet_x?["year",this.facet_x]:["year"],le.updateConfig(ne),this.title_fix()},color:function(){this.color==this.facet|this.color==this.facet_x&&this.check_facet_color_swap("color",this.color),ne.color=this.color,this.quickfilter_on?ne.plugins=[ae,ie()(),te()(this.json_vars)]:ne.plugins=[ae,ie()()],this.title_update(),le.updateConfig(ne),this.title_fix()},quickfilter_on:function(){this.quickfilter_on?ne.plugins=[ae,ie()(),te()(this.json_vars)]:ne.plugins=[ae,ie()()],le.updateConfig(ne),this.title_fix()}}},re=oe,ce=(0,d.Z)(re,J,G,!1,null,"65cad404",null),de=ce.exports,he=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("b-card",{staticClass:"box",attrs:{id:"controlpanel"}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{staticClass:"tab-pane active",attrs:{title:"Scenario",id:"Scenario"}},[t("b-row",[t("b-table",{ref:"selectableTable",staticClass:"table table-hover",attrs:{selectable:"",small:"","sticky-header":"","head-variant":"light",items:e.scenarios,fields:e.fields,"no-border-collapse":!0,responsive:"sm"},on:{"row-selected":e.onRowSelected}})],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[t("label",{staticClass:"selection_label"},[e._v("Baseline to compare to:")])]),t("b-col",[t("treeselect",{attrs:{multiple:!1,options:e.scenarios_drop},model:{value:e.selected.baseline,callback:function(t){e.$set(e.selected,"baseline",t)},expression:"selected.baseline"}})],1)],1)],1),t("b-tab",{staticClass:"tab-pane container smallselecttext",attrs:{title:"Indicator",id:"VariableSet"}},[t("b-row",[t("b-col",{attrs:{cols:"5"}},[t("b-row",[t("label",{staticClass:"selection_label"},[e._v("Indicators")]),t("b-form-radio-group",{attrs:{id:"btn-radios-2",size:"sm",inline:"true",options:[{text:"Simple",value:0},{text:"Detail",value:1},{text:"All",value:2}],name:"radios-btn-default"},model:{value:e.indic_detail,callback:function(t){e.indic_detail=t},expression:"indic_detail"}}),t("label",{staticClass:"labels"},[e._v(" Label ")]),t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.code_label,callback:function(t){e.code_label=t},expression:"code_label"}},[e._v(" Code ")])],1),e._l(e.variables,(function(s,i){return t("b-row",{key:i,staticClass:"form-row"},[t("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[t("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:s.id,expression:"value.id"}],attrs:{block:"",variant:"info"}},[e._v(e._s(s.id)+" ")])],1),t("b-collapse",{attrs:{id:s.id,visible:"",accordion:"my-accordion",role:"tabpanel"}},[t("b-form-checkbox-group",{staticClass:"checkboxgroup",attrs:{options:s.children,"value-field":"id","text-field":"label",stacked:""},model:{value:e.selected.variable,callback:function(t){e.$set(e.selected,"variable",t)},expression:"selected.variable"}})],1)],1)],1)}))],2),t("b-col",[t("b-row",[t("b-col",[t("label",{staticClass:"selection_label"},[e._v("Regions")])])],1),t("b-row",[t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",disabled:e.no_aggregate},model:{value:e.selected.aggregate,callback:function(t){e.$set(e.selected,"aggregate",t)},expression:"selected.aggregate"}},[e._v(" Agg? ")])],1),t("b-col",[t("b-form-checkbox",{staticClass:"inline",attrs:{name:"check-button",switch:""},model:{value:e.select_all,callback:function(t){e.select_all=t},expression:"select_all"}},[e._v(" All? ")])],1)],1),t("div",{staticClass:"dimension_box"},[t("treeselect",{attrs:{multiple:!0,options:e.dimensions,alwaysOpen:!0,clearable:!0,showCount:!1,appendToBody:!1,defaultExpandLevel:"2",maxHeight:325,sortValueBy:"LEVEL",limit:e.Levels,openDirection:"below",flat:!0,limitText:e.tree_limit_text},model:{value:e.selected.dimensions,callback:function(t){e.$set(e.selected,"dimensions",t)},expression:"selected.dimensions"}})],1)],1)],1)],1),t("b-tab",{staticClass:"tab-pane container",attrs:{title:"Settings",id:"ChartSet"}},[t("b-row",[t("b-col",[t("b-form-group",{staticClass:"selection_label top_margin",attrs:{label:"Show"}},[t("b-form-radio-group",{attrs:{id:"calculation",options:e.calculation_methods,name:"radioCalc"},model:{value:e.selected.calculation,callback:function(t){e.$set(e.selected,"calculation",t)},expression:"selected.calculation"}})],1)],1)],1)],1)],1)],1)],1),t("br"),t("b-button",{attrs:{size:"lg"},on:{click:e.download_data}},[e._v("Download data")])],1)},ue=[],_e=K.api.plugins.get("tooltip")({formatters:{year:{label:"year",format:"%Y"}}}),me={data:[{dimension:"us",y_real:20,q_real:23,year:"2013",dimension2:"a"}],dimensions:{year:{type:"measure",scale:"time"},y_real:{type:"measure"},q_real:{type:"measure"},dimension:{type:"category"},dimension2:{type:"category"},dimension3:{type:"category"}},guide:[{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}},{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}}],plugins:[_e,ie()()],type:"line",x:"year",y:"y_real",order:"year",color:["scenario","dimension"]},be=new K.Chart(me),ge={name:"Results",data:function(){var e;return e={pivot:"[]",pivot_columns:[],table_fields:"[]",facet:null,facet_x:null,color:null,json_:[],display_data:[],error:"",chart:{},chart_colours:[],variables:[],variables_summary:[],variables_detailed:[],variables_all:[],var_labels:[],dimensions:[],json_vars:[],var_groups:[],scenarios:[],scenarios_drop:[],fields:[{key:"scenario",sortable:!0},{key:"description",sortable:!0},{key:"Last Run",sortable:!0}]},(0,X.Z)(e,"scenarios",[]),(0,X.Z)(e,"sort_by","scenario"),(0,X.Z)(e,"selectMode","multi"),(0,X.Z)(e,"selected_table",[]),(0,X.Z)(e,"titles",[]),(0,X.Z)(e,"titles2",[]),(0,X.Z)(e,"titles3",[]),(0,X.Z)(e,"quickfilter_on",!1),(0,X.Z)(e,"settings_loaded",!0),(0,X.Z)(e,"select_all",!1),(0,X.Z)(e,"select_all2",!1),(0,X.Z)(e,"select_all3",!1),(0,X.Z)(e,"loading",!1),(0,X.Z)(e,"first_run",!0),(0,X.Z)(e,"chart_not_table",!0),(0,X.Z)(e,"indic_detail",0),(0,X.Z)(e,"code_label",!1),(0,X.Z)(e,"no_aggregate",!1),(0,X.Z)(e,"dimensions_drawn",[]),(0,X.Z)(e,"scenarios_drawn",["baseline"]),(0,X.Z)(e,"title_old","null"),(0,X.Z)(e,"selection_warning","Please set the scenario, variable and dimensions to display results."),(0,X.Z)(e,"selected",{variable:[],variable_label:{},dimensions:[],dimensions2:["All"],dimensions3:["All"],title:[],title2:[],title3:[],time:"Yes",scenarios:["Baseline"],aggregate:!1,baseline:"Baseline",calculation:"Levels",scen_index:[0]}),(0,X.Z)(e,"calculation_methods",[{text:"Absolute value",value:"Levels"},{text:"Absolute difference from baseline",value:"absolute_diff"},{text:"Percentage difference from baseline",value:"perc_diff"},{text:"Year-on-Year change",value:"Annual growth rate"}]),(0,X.Z)(e,"aggregation_methods",[{text:"None",value:"0"},{text:"Sum",value:"sum"}]),(0,X.Z)(e,"minmax_year",[2006,2016]),e},components:{Treeselect:j()},methods:{initialise:function(){var e=this;this.get_vars(),R().get("http://localhost:5000/api/scenarios_ran").then((function(t){var s=t.data.exist;e.scenarios=s,e.scenarios_drop=s.map((function(e){return{label:e["scenario"],id:e["scenario"]}}))}))},onRowSelected:function(e){this.selected_table=e,this.selected.scenarios=[],this.selected.scen_index=[];for(var t=0;t<this.selected_table.length;t++){0==this.selected.scenarios.includes(this.selected_table[t]["scenario"])&&this.selected.scenarios.push(this.selected_table[t]["scenario"]);for(var s=0;s<this.scenarios.length;s++)this.selected_table[t]["scenario"]==this.scenarios[s]["scenario"]&&this.selected.scen_index.push(s)}},selectFirstRow:function(){for(var e=0;e<this.selected.scen_index.length;e++)this.$refs.selectableTable.selectRow(this.selected.scen_index[e])},get_vars:function(){var e=this;R().get("http://localhost:5000/api/results/variables").then((function(t){var s=t.data.vars.indicies;e.var_groups=t.data.vars.groups,e.var_labels=t.data.vars.labels,e.variables_all=s,e.variables_detailed=t.data.vars.indicies_detailed,e.variables_summary=t.data.vars.indicies_summary,e.variables=e.variables_summary,e.titles=t.data.vars.title_map,e.chart_colours=t.data.vars.chart_colours}),(function(t){e.error_message(t,"variables")}))},get_dimensions:function(){var e=this;0!=this.selected.scenarios.length&&(this.selected.titles=this.titles[this.selected.variable],"TIME"==this.selected.titles["title4"]?this.selected.time="Yes":this.selected.time="No",R().get("http://localhost:5000/api/info/".concat(this.selected.titles["title"])).then((function(t){if("Sectors"in t.data)e.dimensions=t.data.Sectors;else{var s=t.data;e.dimensions=s.map((function(e){return{label:e,id:e}}))}}),(function(t){e.error_message(t,"dimensions")})),this.selected.title[0]=this.titles[this.selected.variable[0]]["title"])},download_data:function(){var e=this;this.selected.title=[],this.selected.title2=[],this.selected.title3=[],this.selected.variable_label=[];for(var t=new Array(0),s=0;s<this.selected.variable.length;++s)t.push(this.selected.variable[s]),this.selected.title.push(this.titles[this.selected.variable[s]]["title"]),this.selected.title2.push(this.titles[this.selected.variable[s]]["title2"]),this.selected.title3.push(this.titles[this.selected.variable[s]]["title3"]),this.selected.variable_label.push(this.var_labels[this.selected.variable[s]]);this.selected.variable=t,console.log("Variable:"),console.log(this.selected.title),console.log(this.selected.variable),console.log(this.selected.dimensions);var i=Q().cloneDeep(this.selected);R().get("http://localhost:5000/api/results/data/csv",{params:i}).then((function(e){var t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download="FTT_standalone_download_".concat((new Date).toISOString(),".csv"),i.click()}),(function(t){e.error_message(t,"download data")}))},isSet:function(){return!!this&&""!=this.selected.variable&this.selected.dimensions.length>0&this.selected.dimensions2.length>0&this.selected.dimensions3.length>0&this.selected.scenarios.length>0},isdrawn:function(){return 0!=this.arraysEqual(this.selected.dimensions,this.dimensions_drawn)&&(0!=this.arraysEqual(this.selected.dimensions2,this.dimensions_drawn2)&&(0!=this.arraysEqual(this.selected.dimensions3,this.dimensions_drawn3)&&0!=this.arraysEqual(this.selected.scenarios,this.scenarios_drawn)))},arraysEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0},tree_limit_text:function(){return""},error_message:function(e,t){var s="";if(e.response)s="Failed to get "+t+", the manager is either not running or encountered an error.("+e.response.statusText+")";else s="Failed to get "+t+", the manager is either not running or encountered an error (Check backend is running).";alert(s)}},beforeMount:function(){this.initialise()},mounted:function(){localStorage.pivot="",localStorage.table_fields="",localStorage.Variable="",be.renderTo(document.getElementById("line"))},beforeUpdate:function(){},beforeDestroy:function(){},watch:{variables:function(){1==this.settings_loaded&&this.selected.variable!=this.variables[0].children[0].id&&(this.selected.variable=[this.variables[0].children[0].id],this.get_dimensions())},scenarios:function(){},dimensions:function(){1==this.dimensions.length?this.selected.dimensions=[this.dimensions[0].id]:this.selected.title==this.title_old&&this.dimensions_drawn.length>0?this.selected.dimensions=this.dimensions_drawn:1==this.settings_loaded&&(this.selected.dimensions=[this.dimensions[0].id]),""!=this.selected.title&&(this.title_old=this.selected.title)},"selected.variable":function(){},select_all:function(){if(this.selected.dimensions=[],this.select_all)for(var e=0;e<this.dimensions.length;e++)this.selected.dimensions.push(this.dimensions[e].id);else this.selected.dimensions.push(this.dimensions[0].id)},indic_detail:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((function(e){return{label:e.id,id:e.label,children:e.children.map((function(e){return{label:e.id,id:e.id}}))}})))},code_label:function(){0==this.indic_detail?this.variables=this.variables_summary:1==this.indic_detail?this.variables=this.variables_detailed:2==this.indic_detail&&(this.variables=this.variables_all),this.code_label&&(this.variables=this.variables.map((function(e){return{label:e.id,id:e.label,children:e.children.map((function(e){return{label:e.id,id:e.id}}))}})))}}},fe=ge,ve=(0,d.Z)(fe,he,ue,!1,null,"11ad111e",null),pe=ve.exports,ye=(s(6977),function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"container",style:{display:e.initial?"block":"none"}},[t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Model to calibrate:")]),t("treeselect",{attrs:{multiple:!1,options:e.ftt_models},model:{value:e.selected.model,callback:function(t){e.$set(e.selected,"model",t)},expression:"selected.model"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("End year")]),t("b-form-input",{attrs:{type:"number"},model:{value:e.end_year,callback:function(t){e.end_year=t},expression:"end_year"}})],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.initialise_model}},[e._v("Initialise model")])],1)],1),t("div",{staticClass:"container",style:{display:e.loading?"block":"none"}},[t("h2",[e._v("Initialising model... ")]),t("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Spinning",variant:"info"}})],1),t("div",{staticClass:"container",style:{display:e.loaded?"block":"none"}},[t("h3",[e._v('"'+e._s(e.selected.model)+'"')]),t("b-row",[t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Region to calibrate:")]),t("treeselect",{attrs:{multiple:!1,options:e.regions},model:{value:e.selected.region,callback:function(t){e.$set(e.selected,"region",t)},expression:"selected.region"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Slider limit")]),t("b-form-input",{attrs:{type:"number"},model:{value:e.slider_limit,callback:function(t){e.slider_limit=t},expression:"slider_limit"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Start_year")]),t("b-form-select",{attrs:{options:e.years,type:"number"},model:{value:e.start_year,callback:function(t){e.start_year=t},expression:"start_year"}})],1),t("b-col",{attrs:{cols:"2"}},[t("label",{staticClass:"selection_label"},[e._v("Slider step size")]),t("b-form-input",{attrs:{type:"number"},model:{value:e.slider_step,callback:function(t){e.slider_step=t},expression:"slider_step"}})],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.call_run_ftt}},[e._v("Run FTT")])],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.save_gamma_values}},[e._v(" Save Gamma values ")])],1),t("b-col",{attrs:{cols:"2"}},[t("br"),t("b-button",{on:{click:e.select_other_FTT}},[e._v(" Select other FTT ")])],1)],1),t("b-row",[t("div",{staticClass:"col-4 draw_area"},[t("div",{staticClass:"col-md-12 form-group"},e._l(e.form,(function(s,i){return t("div",{key:i,staticClass:"form-row"},[t("label",{staticClass:"col-md-5 col-form-label dim_label",attrs:{for:i}},[e._v(" "+e._s(i)+" ")]),t("b-form-input",{staticClass:"col-md-5 spec_select",attrs:{type:"range",id:i,step:e.slider_step,min:e.slider_limit_min,max:e.slider_limit,number:!0},model:{value:e.form[i],callback:function(t){e.$set(e.form,i,t)},expression:"form[key]"}}),t("label",{staticClass:"col-md-2 col-form-label dim_label",attrs:{for:i}},[e._v(" "+e._s(s.toFixed(6))+" ")])],1)})),0)]),t("div",{staticClass:"col-8 draw_area"},[t("b-row",[t("b-col",{attrs:{cols:"8"}},[t("div",{staticClass:"selected_variable"},[e._v(" "+e._s(e.selected.variable_label.label)+" "),t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"info",style:{display:e.isSet()?"":"none"},attrs:{variant:"info",size:"sm",title:e.selected.variable_label.desc}},[e._v("i")])],1)]),t("b-col",{staticClass:"download",attrs:{cols:"3"}},[t("b-button",{attrs:{size:"sm"},on:{click:e.download_data}},[e._v("Download data")])],1)],1),t("div",{staticClass:"overlay",style:{display:e.isSet()?"none":"block"}},[t("span",[e._v(e._s(e.selection_warning))])]),t("div",{style:{display:e.chart_not_table?"block":"none"},attrs:{id:"line"}}),t("div",{style:{display:e.chart_not_table?"none":"block"},attrs:{id:"data-table-main"}}),t("b-row",[t("table",[t("tr",[t("td",[t("div",{staticClass:"status_text status_title"},[e._v("Status:")])]),t("td",[t("div",{staticClass:"status_text status_state"},[t("span",{staticClass:"dot",style:{backgroundColor:e.status_state}}),e._v(e._s(e.status_text)+" ")])])])])]),t("b-row",{staticClass:"current_progress"},[t("div",{staticClass:"progress_text"},[t("span",[e._v(" Progress of the current run ")]),0!=e.processing_remaining?t("span",{staticClass:"right"},[e._v(" Est. time remaining "+e._s(e._f("format_time")(e.processing_remaining))+" ")]):e._e()]),t("b-progress",{staticClass:"w-100",attrs:{value:e.processing_processed,max:e.processing_length>0?e.processing_length:100,"show-progress":"",height:"2rem"}})],1)],1)])],1)])}),xe=[],we=K.api.plugins.get("tooltip")({}),Ce={data:[{dimension:"us",y_real:20,q_real:23,year:"2013",dimension2:"a"}],dimensions:{year:{type:"measure",scale:"time"},y_real:{type:"measure"},q_real:{type:"measure"},dimension:{type:"category"},dimension2:{type:"category"},dimension3:{type:"category"}},guide:[{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}},{y:{label:{text:"test"}},color:{brewer:["rgb(197, 68, 110)","rgb(73, 201, 197)","rgb(170, 183, 29)","rgb(0, 99, 152)","rgb(0, 122, 178)","rgb(100, 100, 100)"]}}],plugins:[we,ie()()],type:"line",x:"year",y:"y_real",order:"year",color:["scenario","dimension"]},ke=new K.Chart(Ce),Se={name:"Results",data:function(){var e;return e={slider_limit:100,slider_limit_min:-100,slider_step:1,start_year:2e3,years:[],end_year:2025,loaded:!1,loading:!1,initial:!0,form:{},ftt_models:[],regions:[],regions_list:[],console_log:[],pivot:"[]",pivot_columns:[],table_fields:"[]",facet:null,facet_x:null,color:null,json_:[],display_data:[],error:"",chart:{},chart_colours:[],variables:[],variables_summary:[],variables_detailed:[],var_labels:[],dimensions:[],dimensions2:[],dimensions3:[],json_vars:[],var_groups:[],scenarios:[],fields:[{key:"scenario",sortable:!0},{key:"description",sortable:!0},{key:"Last Run",sortable:!0}],scenarios_county:[],sort_by:"scenario",selectMode:"multi",selected_table:[],titles:[],quickfilter_on:!1,settings_loaded:!0,select_all:!1,select_all2:!1,select_all3:!1},(0,X.Z)(e,"loading",!1),(0,X.Z)(e,"first_run",!0),(0,X.Z)(e,"chart_not_table",!0),(0,X.Z)(e,"indic_detail",!1),(0,X.Z)(e,"no_aggregate",!1),(0,X.Z)(e,"selection_warning","Please set the scenario, variable and dimensions to display results."),(0,X.Z)(e,"selected",{variable:"",variable_label:{},dimensions:[],dimensions2:[],dimensions3:[],title:[],title2:[],title3:[],time:"Yes",scenarios:["Baseline"],aggregate:!1,aggregate2:!1,aggregate3:!1,baseline:"Baseline",calculation:"0",scen_index:[0],region:"",model:"power_gen",type:"Chart"}),(0,X.Z)(e,"error",""),(0,X.Z)(e,"status_text","Standing by"),(0,X.Z)(e,"status_state","#006398"),(0,X.Z)(e,"isRunning",!1),(0,X.Z)(e,"processing_length",0),(0,X.Z)(e,"processing_processed",0),(0,X.Z)(e,"processing_avgtime",0),(0,X.Z)(e,"processing_remaining",0),(0,X.Z)(e,"console_log",[]),(0,X.Z)(e,"calculation_methods",[{text:"Absolute value",value:"0"},{text:"Absolute difference from baseline",value:"absolute_diff"},{text:"Percentage difference from baseline",value:"perc_diff"},{text:"Year-on-Year change",value:"yoy"}]),(0,X.Z)(e,"aggregation_methods",[{text:"None",value:"0"},{text:"Sum",value:"sum"}]),(0,X.Z)(e,"minmax_year",[2006,2016]),e},components:{Treeselect:j()},methods:{initialise:function(){var e=this;R().get("http://localhost:5000/api/info/ftt_options").then((function(t){var s=t.data;e.ftt_models=s.map((function(e){return{label:e,id:e}}))}))},isSet:function(){return!!this&&""!=this.selected.latest},update_chart:function(){ke.updateConfig(Ce),1==this.first_run&&this.selectFirstRow(),this.first_run=!1},update_data:function(){var e=this;R().get("http://localhost:5000/api/gamma/chart/".concat(this.selected.model,"/").concat(this.selected.region,"/").concat(this.start_year,"/json")).then((function(t){e.json_=t.data}),(function(t){e.error_message(t,"requested chart data")}))},set_table_fields:function(){var e=[{key:"scenario",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"dimension2",sortable:!1,stickyColumn:!0,isRowHeader:!0},{key:"Yes"==this.selected.time?"dimension3":"year",sortable:!1,stickyColumn:!0,isRowHeader:!0}];this.update_data(),this.pivot=JSON.parse(this.json_.pivot),this.pivot[0].length>0&&Object.keys(this.pivot[0]).slice(0,Object.keys(this.pivot[0]).length-3).forEach((function(t){e.push({key:t})})),this.table_fields=e},download_data:function(){var e=this;R().get("http://localhost:5000/api/gamma/chart/".concat(this.selected.model,"/").concat(this.selected.region,"/").concat(this.year_from_hist,"/csv")).then((function(e){var t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download="FTT_data_download_".concat((new Date).toISOString(),".csv"),i.click()}),(function(t){e.error_message(t,"download data")}))},error_message:function(e,t){var s="";if(e.response)s="Failed to get "+t+", the manager is either not running or encountered an error.("+e.response.statusText+")";else s="Failed to get "+t+", the manager is either not running or encountered an error (Check backend is running).";alert(s)},load_current_gamma:function(){var e=this;R().get("http://localhost:5000/api/Gamma/values/".concat(this.selected.model,"/").concat(this.selected.region)).then((function(t){e.form={},e.form=t.data.gamma}),(function(t){e.error="Failed to get specifications, the manager is either not running or encountered an error. ("+t.response.statusText+")"}))},call_run_ftt:function(){this.run_ftt()},initialise_model:function(){var e=this;this.initial=!1,this.loading=!0,R().get("http://localhost:5000/api/run_gamma/initialize/".concat(this.end_year)).then((function(t){var s=t.data.years;e.years=s,e.selected.region=e.regions_list[0],e.loading=!1,e.loaded=!0})),R().get("http://localhost:5000/api/info/region_titles").then((function(t){var s=t.data;e.regions_list=s,e.regions=s.map((function(e){return{label:e,id:e}}))}),(function(t){e.error_message(t,"region titles")}))},run_ftt:function(){var e=this;this.processing_length=0,this.processing_processed=0,this.processing_avgtime=0,this.processing_remaining=0;var t={data:this.form,model:this.selected.model,region:this.selected.region,region_pos:this.regions_list.indexOf(this.selected.region)};this.log("message;message:Started process...;"),this.log("message;message:Processing data...;"),R().post("http://localhost:5000/api/run_gamma/update_gamma/",t,{headers:{"Content-Type":"application/json"}}).then((function(t){e.log("message;message:Data processed. Running modelling.;"),e.$sse("http://localhost:5000/api/run_gamma/start/",{format:"plain"}).then((function(t){a=t,t.onError((function(s){t.close(),e.update_status("system_error")})),t.subscribe("status_change",(function(s){"running"!=s&&(e.update_data(),t.close()),e.update_status(s),e.log(s)})),t.subscribe("processing",(function(t){e.update_progress(t),"progress"!=t.split(";")[0]&&e.log(t)}))}))}),(function(t){e.$bvToast.toast("Unexpected error",{title:"Running failed!",toaster:"b-toaster-bottom-right",appendToast:!0,autoHideDelay:7e3,variant:"danger"})}))},log:function(e){var t=new Date;t=t.toISOString();var s=/(?:;message:)([a-zA-Z0-9 \.\-\,]*)(?:;)/g,i=[];if(i=s.exec(e),0!=i.length){var a={timestamp:t,message:i[1]};this.console_log.push(a)}},update_status:function(e){switch(e){case"running":this.isRunning=!0,this.status_text="Model is running",this.status_state="#F1C40F";break;case"finished":this.isRunning=!1,this.status_text="Run finished",this.status_state="#99FFCC";break;default:this.isRunning=!1,this.status_text="Run finished with errors","system_error"==e&&(this.status_text="System error!"),this.status_state="#F06449",this.log("message;message:System error - an unexpected error occurs during the model run. There may be more information in the command prompt.;")}},update_progress:function(e){var t=e.split(";"),s=t[0];if("items"==s)this.processing_length=parseInt(t[1]);else if("progress"==s){this.processing_processed+=1;var i=this.processing_processed,a=parseFloat(t[3]);this.processing_avgtime=0==this.processing_avgtime?a:(this.processing_avgtime*i+a)/(i+1),this.processing_remaining=(this.processing_length-i)*this.processing_avgtime}},save_gamma_values:function(){var e={data:this.form,model:this.selected.model,region:this.selected.region,region_pos:this.regions_list.indexOf(this.selected.region)};R().post("http://localhost:5000/api/run_gamma/save_gamma/",e,{headers:{"Content-Type":"application/json"}})},select_other_FTT:function(){this.initial=!0,this.loaded=!1}},beforeMount:function(){this.initialise(),this.log("message;message:Standing by...;")},beforeDestroy:function(){a.close()},mounted:function(){localStorage.pivot="",localStorage.table_fields="",localStorage.Variable="",ke.renderTo(document.getElementById("line"))},watch:{category:function(){this.charts=this.graphics[this.category].charts,this.tables=this.graphics[this.category].tables},"selected.region":function(){this.load_current_gamma(),this.update_data()},"selected.model":function(){},json_:function(){this.pivot=JSON.parse(this.json_.pivot),this.display_data=JSON.parse(this.json_.results),this.json_vars=this.json_.info.filter((function(e){return-1==["year","dimension","dimension2","dimension3","scenario"].indexOf(e)}))},slider_limit:function(){this.slider_limit_min=-1*this.slider_limit},display_data:function(){if("table"!=this.selected.type){Ce.data=this.display_data,Ce.dimensions={year:{type:"category"},dimension:{type:"category"},dimension2:{type:"category"},scenario:{type:"category"}},Ce.x=this.json_.x,Ce.y=this.json_.y,Ce.color=this.json_.color,Ce.type=this.json_.type,"None"!=this.json_.label?Ce.label=this.json_.label:Ce.label="",Ce.guide[0].y.label.text=this.json_.unit;for(var e=0;e<this.json_vars.length;e++)Ce.dimensions[this.json_vars[e]]={type:"measure"};this.quickfilter_on?Ce.plugins=[we,ie()(),te()(this.json_vars)]:Ce.plugins=[we,ie()()],ke.updateConfig(Ce)}}},filters:{format_time:function(e){if(!e)return"";var t=Math.floor(e/60),s=parseInt(e%60);return"".concat(t," m ").concat(s," s")}}},Ze=Se,Te=(0,d.Z)(Ze,ye,xe,!1,null,"66104ca3",null),Ee=Te.exports,Re=function(){var e=this;e._self._c;return e._m(0)},Ae=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("div",{staticClass:"container"},[t("div",{attrs:{id:"title"}},[t("h1",[e._v("Application terminated")])]),t("div",{attrs:{id:"intro_text"}},[t("p",[e._v("You may close this window now.")])])])])}],je={name:"Exit",data:function(){return{}},mounted:function(){var e=this;setTimeout(R().get("http://localhost:5000/api/exit").then((function(e){console.log("Application closed.")}),(function(t){e.error_message(t,"regions")})),1e3)}},De=je,Fe=(0,d.Z)(De,Re,Ae,!1,null,null,null),Ne=Fe.exports;n["default"].use(_.ZP);var Oe=new _.ZP({routes:[{path:"/",name:"home",component:S,children:[{path:"run",component:O},{path:"metadata",component:$},{path:"",component:U},{path:"results",component:de},{path:"Extract",component:pe},{path:"Gamma",component:Ee},{path:"exit",component:Ne}]},{path:"/about",name:"about",component:function(){return s.e(443).then(s.bind(s,8725))},children:[{path:"run",component:O}]}]}),Le=s(2970),Ie=s(266),Be=s(2513),Me=s.n(Be),Ye=(s(7024),s(7027)),$e=s(8947),qe=s(1436),Pe=s(7810);$e.vI.add(qe.kZ_,qe.I7k,qe.Xcf,qe.Vmj),n["default"].component("font-awesome-icon",Pe.GN),n["default"].config.productionTip=!1,n["default"].use(Le.ZPm),n["default"].use(Ye.Z),n["default"].use(Me()),n["default"].directive("ripple",Ie.Z);var He=new n["default"]({data:{region_selection:[],pivot:[],table_fields:{},model_start_year:2015,model_end_year:2050,results_selected:{},saved:!1,scen_region:null,scen_saved:!1,spec_saved:!1,specs_variable:null}});new n["default"]({router:Oe,render:function(e){return e(u)}}).$mount("#app")}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,n){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],n=e[d][2];for(var o=!0,r=0;r<i.length;r++)(!1&n||l>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(o=!1,n<l&&(l=n));if(o){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/about-legacy.4879493f.js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend_pilot_:";s.l=function(i,a,n,l){if(e[i])e[i].push(a);else{var o,r;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+n){o=h;break}}o||(r=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+n),o.src=i),e[i]=[a];var u=function(t,s){o.onerror=o.onload=null,clearTimeout(_);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(s)})),t)return t(s)},_=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),r&&document.head.appendChild(o)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/frontend/"}(),function(){var e={143:0};s.f.j=function(t,i){var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var n=new Promise((function(s,i){a=e[t]=[s,i]}));i.push(a[2]=n);var l=s.p+s.u(t),o=new Error,r=function(i){if(s.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var n=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+l+")",o.name="ChunkLoadError",o.type=n,o.request=l,a[1](o)}};s.l(l,r,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,n,l=i[0],o=i[1],r=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(r)var d=r(s)}for(t&&t(i);c<l.length;c++)n=l[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},i=self["webpackChunkfrontend_pilot_"]=self["webpackChunkfrontend_pilot_"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(1941)}));i=s.O(i)})();
//# sourceMappingURL=app-legacy.42cf8211.js.map